<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Groundwork</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300&display=swap" rel="stylesheet">
<style>
:root {
  --soil: #1E1208;
  --bark: #3D2210;
  --clay: #7A4F2E;
  --clay-light: #A67355;
  --sand: #EAD9C0;
  --sand-light: #F5EDE0;
  --sage: #6B8F6E;
  --sage-light: #9BB89E;
  --sage-pale: #E8F0E9;
  --morning: #FAF5EE;
  --white: #FDFAF6;
  --accent: #C47B3F;
  --accent-light: #E8A96A;
  --accent-pale: #FAF0E6;
  --resistance: #B85C5C;
  --resistance-pale: #F9EDED;
  --complete: #5A8A5E;
  --complete-pale: #EAF2EA;
  --pending: #B8943A;
  --pending-pale: #FBF5E6;
  --text: #1E1208;
  --text-mid: #5C3D20;
  --text-light: #9A7A5A;
  --border: rgba(30,18,8,0.1);
  --shadow: 0 2px 20px rgba(30,18,8,0.08);
  --shadow-md: 0 4px 30px rgba(30,18,8,0.12);
  --shadow-lg: 0 8px 40px rgba(30,18,8,0.16);
}

* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

body {
  font-family: 'DM Sans', sans-serif;
  background: #2C1A0E;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  min-height: 100vh;
  padding: 32px 0;
  gap: 0;
}

/* â”€â”€ DEV SIDEBAR â”€â”€ */
#dev-sidebar {
  width: 160px;
  flex-shrink: 0;
  position: sticky;
  top: 32px;
  display: flex;
  flex-direction: column;
  gap: 3px;
  padding: 14px 12px;
  background: rgba(15,8,2,0.75);
  border-radius: 0 16px 16px 0;
  backdrop-filter: blur(10px);
  max-height: calc(100vh - 64px);
  overflow-y: auto;
  scrollbar-width: none;
}
#dev-sidebar::-webkit-scrollbar { display: none; }
.sidebar-section-label {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: var(--accent);
  padding: 12px 4px 4px;
  opacity: 0.9;
}
.sidebar-section-label:first-child { padding-top: 0; }

/* â”€â”€ PHONE WRAPPER â”€â”€ */
#phone-wrapper {
  flex: 1;
  display: flex;
  justify-content: center;
  padding: 0 24px;
}

/* â”€â”€ PHONE SHELL â”€â”€ */
.phone {
  width: 390px;
  min-height: 844px;
  background: var(--morning);
  border-radius: 44px;
  overflow: hidden;
  position: relative;
  box-shadow: 0 30px 80px rgba(0,0,0,0.5), inset 0 0 0 1px rgba(255,255,255,0.1);
  display: flex;
  flex-direction: column;
}

/* â”€â”€ SCREENS â”€â”€ */
.screen {
  display: none;
  flex-direction: column;
  min-height: 844px;
  position: relative;
  background: var(--morning);
  animation: fadeIn 0.3s ease;
}
.screen.active { display: flex; }

@keyframes fadeIn {
  from { opacity:0; transform:translateX(20px); }
  to   { opacity:1; transform:translateX(0); }
}
@keyframes fadeInUp {
  from { opacity:0; transform:translateY(20px); }
  to   { opacity:1; transform:translateY(0); }
}

/* â”€â”€ STATUS BAR â”€â”€ */
.status-bar {
  background: var(--soil);
  padding: 14px 24px 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--sand);
  font-size: 12px;
  font-weight: 500;
  flex-shrink: 0;
}
.status-icons { display:flex; gap:6px; align-items:center; font-size:11px; }

/* â”€â”€ TYPOGRAPHY â”€â”€ */
.display { font-family:'Playfair Display',serif; }
h1 { font-family:'Playfair Display',serif; font-size:28px; color:var(--soil); line-height:1.2; }
h2 { font-family:'Playfair Display',serif; font-size:22px; color:var(--soil); line-height:1.3; }
h3 { font-family:'Playfair Display',serif; font-size:18px; color:var(--soil); }
p  { color:var(--text-mid); line-height:1.6; font-size:14px; }

/* â”€â”€ BUTTONS â”€â”€ */
.btn {
  display:flex; align-items:center; justify-content:center;
  padding: 16px 24px;
  border-radius: 14px;
  border: none;
  font-family: 'DM Sans', sans-serif;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  width: 100%;
}
.btn:active { transform:scale(0.97); }
.btn-primary { background:var(--accent); color:white; box-shadow:0 4px 20px rgba(196,123,63,0.3); }
.btn-primary:hover { background:#B8702F; }
.btn-secondary { background:var(--white); color:var(--soil); border:1.5px solid var(--border); }
.btn-secondary:hover { background:var(--sand-light); }
.btn-ghost { background:transparent; color:var(--clay); font-size:14px; padding:12px; }
.btn-sm { padding:10px 18px; font-size:13px; border-radius:10px; width:auto; }
.btn-icon { width:44px; height:44px; padding:0; border-radius:12px; }

/* â”€â”€ INPUTS â”€â”€ */
.input-group { margin-bottom:16px; }
.input-label { font-size:12px; font-weight:500; color:var(--text-light); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:6px; display:block; }
.input {
  width:100%; padding:14px 16px;
  background:var(--white); border:1.5px solid var(--border);
  border-radius:12px; font-family:'DM Sans',sans-serif;
  font-size:15px; color:var(--soil);
  transition: border-color 0.2s, box-shadow 0.2s;
  outline:none;
}
.input:focus { border-color:var(--accent); box-shadow:0 0 0 3px rgba(196,123,63,0.1); }
.input::placeholder { color:var(--text-light); }
textarea.input { resize:none; line-height:1.5; }

/* â”€â”€ CARDS â”€â”€ */
.card {
  background:var(--white);
  border-radius:16px;
  border:1px solid var(--border);
  box-shadow: var(--shadow);
}

/* â”€â”€ HEADER â”€â”€ */
.app-header {
  background:var(--soil);
  padding:20px 24px 24px;
  flex-shrink:0;
}
.header-row { display:flex; justify-content:space-between; align-items:center; margin-bottom:4px; }
.logo-text { font-family:'Playfair Display',serif; font-size:22px; color:var(--sand); }
.logo-text span { color:var(--accent); }
.header-greeting { color:var(--sand); font-size:13px; font-weight:300; opacity:0.65; margin-bottom:2px; }
.header-date { color:var(--sand); font-family:'Playfair Display',serif; font-size:17px; }
.avatar-circle {
  width:40px; height:40px; border-radius:50%;
  background:var(--clay); border:2px solid var(--accent);
  display:flex; align-items:center; justify-content:center;
  color:var(--sand); font-size:14px; font-weight:600;
  cursor:pointer;
}

/* â”€â”€ STATS ROW â”€â”€ */
.stats-row {
  display:flex; gap:1px; background:var(--bark);
  border-radius:12px; overflow:hidden; margin-top:18px;
}
.stat-cell {
  flex:1; background:rgba(255,255,255,0.06);
  padding:12px 6px; text-align:center;
}
.stat-num { color:var(--accent); font-family:'Playfair Display',serif; font-size:20px; line-height:1; }
.stat-lbl { color:var(--sand); font-size:9px; font-weight:300; opacity:0.55; margin-top:3px; text-transform:uppercase; letter-spacing:0.5px; }

/* â”€â”€ NAV â”€â”€ */
.bottom-nav {
  background:var(--white); border-top:1px solid var(--border);
  padding:10px 0 28px;
  display:flex; justify-content:space-around;
  flex-shrink:0;
}
.nav-btn {
  display:flex; flex-direction:column; align-items:center;
  gap:3px; padding:4px 20px; cursor:pointer;
  background:none; border:none; font-family:'DM Sans',sans-serif;
}
.nav-icon { font-size:20px; line-height:1; }
.nav-lbl { font-size:10px; color:var(--text-light); font-weight:500; }
.nav-btn.active .nav-lbl { color:var(--soil); }
.nav-btn.active .nav-icon { position:relative; }

/* â”€â”€ FAB â”€â”€ */
.fab {
  position:absolute; bottom:90px; right:20px;
  width:54px; height:54px; border-radius:50%;
  background:var(--accent); color:white;
  border:none; font-size:24px; cursor:pointer;
  box-shadow:0 4px 20px rgba(196,123,63,0.4);
  display:flex; align-items:center; justify-content:center;
  transition:transform 0.2s;
  z-index:10;
}
.fab:active { transform:scale(0.92); }

/* â”€â”€ SCROLL AREA â”€â”€ */
.scroll { flex:1; overflow-y:auto; padding-bottom:20px; }
.scroll::-webkit-scrollbar { display:none; }

/* â”€â”€ SECTION â”€â”€ */
.section { padding:20px 20px 0; }
.section-head { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
.section-title { font-family:'Playfair Display',serif; font-size:16px; color:var(--soil); }
.section-link { font-size:12px; color:var(--clay); font-weight:500; cursor:pointer; }

/* â”€â”€ ALERT CARD â”€â”€ */
.alert-card {
  margin:16px 20px 0;
  background:linear-gradient(135deg, var(--soil) 0%, var(--bark) 100%);
  border-radius:16px; padding:16px 18px;
  display:flex; align-items:center; gap:12px;
  position:relative; overflow:hidden;
}
.alert-card::after {
  content:''; position:absolute; right:-20px; top:-20px;
  width:80px; height:80px;
  background:radial-gradient(circle, rgba(196,123,63,0.4) 0%, transparent 70%);
  border-radius:50%;
}
.pulse-dot {
  width:10px; height:10px; border-radius:50%;
  background:var(--accent); flex-shrink:0;
  animation:pulse 2s infinite;
}
@keyframes pulse {
  0%,100%{opacity:1;transform:scale(1)}
  50%{opacity:0.5;transform:scale(1.4)}
}
.alert-body { flex:1; }
.alert-title { color:var(--sand); font-size:13px; font-weight:500; }
.alert-sub { color:var(--sand); font-size:11px; opacity:0.6; margin-top:2px; }
.alert-btn { background:var(--accent); color:white; border:none; border-radius:8px; padding:8px 12px; font-size:11px; font-weight:500; font-family:'DM Sans',sans-serif; cursor:pointer; flex-shrink:0; z-index:1; }

/* â”€â”€ INSIGHT BANNER â”€â”€ */
.insight-banner {
  margin:12px 20px 0;
  background:var(--resistance-pale); border:1px solid rgba(184,92,92,0.2);
  border-radius:12px; padding:12px 14px;
  display:flex; gap:10px;
}
.insight-icon { font-size:15px; flex-shrink:0; margin-top:1px; }
.insight-text { font-size:12px; color:var(--resistance); line-height:1.5; }
.insight-text strong { font-weight:600; }

/* â”€â”€ CLIENT CARD â”€â”€ */
.client-card {
  background:var(--white); border:1px solid var(--border);
  border-radius:16px; padding:16px; margin-bottom:12px;
  cursor:pointer; transition:transform 0.15s, box-shadow 0.15s;
  animation:fadeInUp 0.35s ease both;
}
.client-card:active { transform:scale(0.98); box-shadow:var(--shadow-md); }
.client-card-top { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.client-av {
  width:42px; height:42px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  font-size:14px; font-weight:600; color:white; flex-shrink:0;
}
.client-name { font-size:15px; font-weight:500; color:var(--soil); }
.client-meta { font-size:11px; color:var(--text-light); margin-top:2px; }
.badge {
  font-size:10px; font-weight:500; padding:4px 9px;
  border-radius:20px; text-transform:uppercase; letter-spacing:0.4px;
}
.badge-today  { background:rgba(196,123,63,0.12); color:var(--accent); }
.badge-good   { background:var(--complete-pale); color:var(--complete); }
.badge-alert  { background:var(--resistance-pale); color:var(--resistance); }
.badge-pq     { background:rgba(107,143,110,0.15); color:var(--sage); }

/* â”€â”€ PROGRESS â”€â”€ */
.prog-meta { display:flex; justify-content:space-between; margin-bottom:5px; }
.prog-label { font-size:11px; color:var(--text-light); }
.prog-count { font-size:11px; font-weight:500; color:var(--soil); }
.prog-track { height:4px; background:var(--border); border-radius:2px; overflow:hidden; margin-bottom:12px; }
.prog-fill  { height:100%; border-radius:2px; transition:width 0.8s ease; }

/* â”€â”€ COMMITMENT ROWS â”€â”€ */
.commit-row {
  display:flex; align-items:center; gap:8px;
  padding:7px 0; border-bottom:1px solid rgba(30,18,8,0.05);
}
.commit-row:last-child { border-bottom:none; }
.commit-dot {
  width:18px; height:18px; border-radius:50%; flex-shrink:0;
  display:flex; align-items:center; justify-content:center; font-size:9px;
}
.dot-done    { background:var(--complete); color:white; }
.dot-pending { border:1.5px solid var(--pending); }
.dot-resist  { border:1.5px solid var(--resistance); background:rgba(184,92,92,0.08); }
.commit-text { font-size:12px; color:var(--soil); flex:1; line-height:1.3; }
.commit-text.done { opacity:0.35; text-decoration:line-through; }
.sab-tag { font-size:9px; background:var(--resistance-pale); color:var(--resistance); padding:2px 7px; border-radius:10px; white-space:nowrap; }
.pq-tag  { font-size:9px; background:var(--sage-pale); color:var(--sage); padding:2px 7px; border-radius:10px; white-space:nowrap; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 1 â€” SPLASH / ONBOARDING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.splash-bg {
  background:var(--soil);
  flex:1; display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  padding:40px 32px;
  position:relative; overflow:hidden;
}
.splash-bg::before {
  content:''; position:absolute;
  width:300px; height:300px; border-radius:50%;
  background:radial-gradient(circle, rgba(196,123,63,0.25) 0%, transparent 70%);
  top:-60px; right:-80px;
}
.splash-bg::after {
  content:''; position:absolute;
  width:200px; height:200px; border-radius:50%;
  background:radial-gradient(circle, rgba(107,143,110,0.2) 0%, transparent 70%);
  bottom:60px; left:-40px;
}
.splash-logo { font-family:'Playfair Display',serif; font-size:42px; color:var(--sand); margin-bottom:12px; position:relative; z-index:1; }
.splash-logo span { color:var(--accent); }
.splash-headline { color:var(--sand); font-size:17px; font-weight:500; text-align:center; line-height:1.4; margin-bottom:10px; position:relative; z-index:1; max-width:280px; }
.splash-tag  { color:var(--sand); opacity:0.45; font-size:13px; font-weight:300; font-style:italic; margin-bottom:60px; position:relative; z-index:1; }
.splash-actions { width:100%; display:flex; flex-direction:column; gap:12px; position:relative; z-index:1; }
.splash-divider { color:var(--sand); opacity:0.3; font-size:12px; text-align:center; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 2 â€” CREATE ACCOUNT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.form-screen { background:var(--morning); }
.form-header {
  background:var(--soil); padding:20px 24px 28px;
}
.back-btn {
  background:none; border:none; color:var(--sand); opacity:0.7;
  font-size:20px; cursor:pointer; padding:0; margin-bottom:16px;
  display:block;
}
.form-header h2 { color:var(--sand); margin-bottom:6px; }
.form-header p  { color:var(--sand); opacity:0.5; font-size:13px; }
.form-body { padding:24px 20px; }
.mode-select-row { display:flex; gap:10px; margin-bottom:20px; }
.mode-card {
  flex:1; padding:14px 10px; border-radius:14px;
  border:2px solid var(--border); background:var(--white);
  cursor:pointer; text-align:center; transition:all 0.2s;
}
.mode-card.selected { border-color:var(--accent); background:var(--accent-pale); }
.mode-card-icon { font-size:22px; margin-bottom:6px; }
.mode-card-title { font-size:13px; font-weight:500; color:var(--soil); }
.mode-card-sub   { font-size:10px; color:var(--text-light); margin-top:2px; line-height:1.3; }
.mode-card.selected .mode-card-title { color:var(--accent); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 3 â€” COACH DASHBOARD
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 4 â€” ADD CLIENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sheet-overlay {
  position:absolute; inset:0;
  background:rgba(30,18,8,0.5);
  display:flex; align-items:flex-end;
  z-index:100;
  animation:fadeIn 0.2s ease;
}
.sheet {
  background:var(--white); width:100%;
  border-radius:24px 24px 0 0;
  padding:0 0 40px;
  max-height:90%;
  overflow-y:auto;
  animation:slideSheet 0.3s ease;
}
.sheet::-webkit-scrollbar { display:none; }
@keyframes slideSheet {
  from { transform:translateY(100%); }
  to   { transform:translateY(0); }
}
.sheet-handle {
  width:40px; height:4px; background:var(--border);
  border-radius:2px; margin:12px auto 0;
}
.sheet-header {
  padding:16px 20px 0;
  display:flex; justify-content:space-between; align-items:center;
}
.sheet-title { font-family:'Playfair Display',serif; font-size:18px; color:var(--soil); }
.sheet-close { background:none; border:none; font-size:18px; color:var(--text-light); cursor:pointer; }
.sheet-body { padding:20px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 5 â€” CLIENT DETAIL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.detail-header {
  background:var(--soil); padding:20px 24px 24px;
}
.detail-client-row { display:flex; align-items:center; gap:14px; margin-bottom:16px; }
.detail-av { width:52px; height:52px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:18px; font-weight:600; color:white; border:2px solid rgba(255,255,255,0.2); }
.detail-name { font-family:'Playfair Display',serif; font-size:20px; color:var(--sand); }
.detail-meta { font-size:12px; color:var(--sand); opacity:0.5; margin-top:2px; }
.detail-stats { display:flex; gap:1px; background:var(--bark); border-radius:10px; overflow:hidden; }
.detail-stat { flex:1; background:rgba(255,255,255,0.06); padding:10px 6px; text-align:center; }
.detail-stat-num { color:var(--accent); font-size:18px; font-family:'Playfair Display',serif; line-height:1; }
.detail-stat-lbl { color:var(--sand); font-size:9px; opacity:0.5; margin-top:2px; text-transform:uppercase; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 6 â€” POST SESSION (Add Commitments)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.commit-entry {
  background:var(--white); border:1.5px solid var(--border);
  border-radius:14px; padding:14px; margin-bottom:10px;
  position:relative;
}
.commit-num {
  position:absolute; top:-8px; left:14px;
  background:var(--accent); color:white;
  font-size:10px; font-weight:600; padding:2px 8px;
  border-radius:10px;
}
.remove-btn { position:absolute; top:12px; right:12px; background:none; border:none; color:var(--text-light); font-size:16px; cursor:pointer; }
.add-commit-btn {
  display:flex; align-items:center; justify-content:center; gap:8px;
  padding:12px; border-radius:12px;
  border:1.5px dashed var(--clay-light);
  background:transparent; color:var(--clay);
  font-family:'DM Sans',sans-serif; font-size:13px; font-weight:500;
  cursor:pointer; width:100%; margin-bottom:20px;
  transition:all 0.2s;
}
.add-commit-btn:hover { background:var(--accent-pale); border-color:var(--accent); color:var(--accent); }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 7 â€” CLIENT VIEW (Client Side)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.client-screen-header {
  background:linear-gradient(160deg, var(--sage) 0%, #4A7A5C 100%);
  padding:20px 24px 28px;
}
.client-screen-header .logo-text { color:white; }
.client-screen-header .logo-text span { color:rgba(255,255,255,0.7); }
.client-name-header { color:white; font-family:'Playfair Display',serif; font-size:20px; margin-top:12px; }
.client-coach-tag { color:rgba(255,255,255,0.6); font-size:12px; margin-top:3px; }
.client-progress-ring { text-align:center; margin:20px 0 10px; }
.ring-text { font-family:'Playfair Display',serif; font-size:32px; color:var(--soil); }
.ring-sub { font-size:12px; color:var(--text-light); margin-top:2px; }

.client-commit-card {
  background:var(--white); border:1px solid var(--border);
  border-radius:16px; padding:16px; margin-bottom:10px;
  cursor:pointer; transition:all 0.2s;
}
.client-commit-card:active { transform:scale(0.98); }
.commit-card-top { display:flex; align-items:flex-start; gap:12px; }
.commit-checkbox {
  width:24px; height:24px; border-radius:8px; flex-shrink:0;
  border:2px solid var(--border); background:var(--morning);
  display:flex; align-items:center; justify-content:center;
  margin-top:1px; cursor:pointer; transition:all 0.2s;
}
.commit-checkbox.checked { background:var(--complete); border-color:var(--complete); }
.commit-checkbox.checked::after { content:'âœ“'; color:white; font-size:12px; font-weight:600; }
.commit-card-title { font-size:14px; font-weight:500; color:var(--soil); line-height:1.4; flex:1; }
.commit-card-title.done { text-decoration:line-through; opacity:0.4; }
.commit-due { font-size:11px; color:var(--text-light); margin-top:4px; }
.commit-prompt { font-size:12px; color:var(--clay); font-style:italic; margin-top:8px; padding:8px 10px; background:var(--accent-pale); border-radius:8px; border-left:3px solid var(--accent); }

/* â”€â”€ CHECK-IN MODAL â”€â”€ */
.checkin-status-row { display:flex; gap:8px; margin-bottom:16px; }
.status-pill {
  flex:1; padding:10px 6px; border-radius:12px; text-align:center;
  border:1.5px solid var(--border); background:var(--white);
  cursor:pointer; transition:all 0.2s; font-size:11px; font-weight:500; color:var(--text-mid);
}
.status-pill.sel-done    { border-color:var(--complete); background:var(--complete-pale); color:var(--complete); }
.status-pill.sel-notdone { border-color:var(--resistance); background:var(--resistance-pale); color:var(--resistance); }
.status-pill.sel-prog    { border-color:var(--pending); background:var(--pending-pale); color:var(--pending); }
.status-pill-icon { font-size:18px; display:block; margin-bottom:3px; }

.resist-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:16px; }
.resist-pill {
  padding:10px 8px; border-radius:12px; text-align:center;
  border:1.5px solid var(--border); background:var(--white);
  cursor:pointer; transition:all 0.2s; font-size:11px; color:var(--text-mid);
  font-weight:500;
}
.resist-pill:hover { border-color:var(--resistance); background:var(--resistance-pale); }
.resist-pill.selected { border-color:var(--resistance); background:var(--resistance-pale); color:var(--resistance); }
.resist-pill-icon { font-size:16px; display:block; margin-bottom:3px; }

.pq-sab-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:16px; }
.sab-pill {
  padding:10px 8px; border-radius:12px; text-align:left;
  border:1.5px solid var(--border); background:var(--white);
  cursor:pointer; transition:all 0.2s; font-size:11px; color:var(--text-mid);
}
.sab-pill:hover { border-color:var(--sage); background:var(--sage-pale); }
.sab-pill.selected { border-color:var(--sage); background:var(--sage-pale); color:var(--sage); }
.sab-name { font-weight:600; font-size:12px; margin-bottom:2px; }
.sab-desc { font-size:10px; opacity:0.7; line-height:1.3; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN 8 â€” SETTINGS / NOTIFICATIONS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.settings-group { margin-bottom:24px; }
.settings-group-title { font-size:11px; font-weight:600; color:var(--text-light); text-transform:uppercase; letter-spacing:0.8px; margin-bottom:10px; padding:0 4px; }
.settings-row {
  background:var(--white); border-radius:12px; margin-bottom:2px;
  padding:14px 16px; display:flex; align-items:center; gap:12px;
  border:1px solid var(--border);
}
.settings-row-icon { font-size:18px; width:28px; text-align:center; }
.settings-row-body { flex:1; }
.settings-row-title { font-size:14px; font-weight:500; color:var(--soil); }
.settings-row-sub   { font-size:11px; color:var(--text-light); margin-top:1px; }
.toggle {
  width:44px; height:26px; border-radius:13px;
  background:var(--border); position:relative;
  cursor:pointer; transition:background 0.2s; flex-shrink:0;
  border:none;
}
.toggle.on { background:var(--accent); }
.toggle::after {
  content:''; position:absolute;
  width:20px; height:20px; border-radius:50%;
  background:white; top:3px; left:3px;
  transition:left 0.2s;
  box-shadow:0 1px 4px rgba(0,0,0,0.2);
}
.toggle.on::after { left:21px; }

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SCREEN SELECTOR (DEV NAV)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.dev-btn {
  background: transparent;
  border: none;
  color: rgba(234,217,192,0.85);
  font-size: 11px;
  padding: 7px 10px;
  border-radius: 8px;
  cursor: pointer;
  font-family: 'DM Sans', sans-serif;
  transition: background 0.15s, color 0.15s;
  white-space: nowrap;
  text-align: left;
  width: 100%;
  display: block;
}
.dev-btn:hover { background: rgba(255,255,255,0.07); color: var(--sand); }
.dev-btn.active { background: var(--accent); color: white; font-weight: 500; }

/* Misc helpers */
.divider { height:1px; background:var(--border); margin:16px 0; }
.tag-pq { display:inline-flex; align-items:center; gap:4px; background:var(--sage-pale); color:var(--sage); font-size:10px; padding:3px 8px; border-radius:10px; font-weight:500; }

/* Page title bar */
.page-title-bar {
  display:flex; align-items:center; gap:12px;
  padding:16px 20px 0;
}
.page-back { background:none; border:none; font-size:20px; color:var(--clay); cursor:pointer; }
.page-title { font-family:'Playfair Display',serif; font-size:18px; color:var(--soil); }


/* â”€â”€ TIME FILTER â”€â”€ */
.time-filter {
  background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.15);
  color:rgba(234,217,192,0.6); font-family:'DM Sans',sans-serif;
  font-size:11px; font-weight:500; padding:6px 12px; border-radius:20px;
  cursor:pointer; transition:all 0.2s;
}
.time-filter.active { background:var(--accent); border-color:var(--accent); color:white; }
.time-filter:hover:not(.active) { background:rgba(255,255,255,0.15); color:var(--sand); }

/* â”€â”€ INSIGHT STAT CARDS â”€â”€ */
.insight-stat-card {
  background:var(--white); border:1px solid var(--border);
  border-radius:14px; padding:14px 12px;
}
.isc-num { font-family:'Playfair Display',serif; font-size:24px; color:var(--soil); line-height:1; }
.isc-lbl { font-size:11px; color:var(--text-light); margin-top:4px; }
.isc-trend { font-size:10px; margin-top:4px; font-weight:500; }
.isc-trend.up   { color:var(--complete); }
.isc-trend.down { color:var(--sage); }

/* â”€â”€ BAR CHART â”€â”€ */
.bar-col { flex:1; display:flex; flex-direction:column; align-items:center; gap:4px; }
.bar-fill { width:100%; border-radius:4px 4px 0 0; min-height:4px; transition:height 0.8s ease; }
.bar-lbl  { font-size:9px; color:var(--text-light); }

/* â”€â”€ RESIST BARS â”€â”€ */
.resist-bar-row {
  display:flex; align-items:center; gap:8px;
  padding:6px 0; border-bottom:1px solid rgba(30,18,8,0.05);
}
.resist-bar-label { font-size:11px; color:var(--soil); width:88px; flex-shrink:0; }
.resist-bar-track { flex:1; height:6px; background:var(--border); border-radius:3px; overflow:hidden; }
.resist-bar-fill  { height:100%; border-radius:3px; }
.resist-bar-count { font-size:11px; font-weight:600; color:var(--soil); width:18px; text-align:right; flex-shrink:0; }

/* â”€â”€ SABOTEUR MAP CELLS â”€â”€ */
.sab-map-cell {
  border-radius:10px; padding:8px 4px; text-align:center;
  transition:transform 0.15s;
}
.sab-map-cell:active { transform:scale(0.95); }
.sab-map-cell.high { background:var(--resistance); }
.sab-map-cell.mid  { background:rgba(184,92,92,0.4); }
.sab-map-cell.low  { background:rgba(184,92,92,0.15); }
.sab-map-cell.none { background:var(--border); }
.smc-name  { font-size:9px; font-weight:600; color:var(--soil); line-height:1.2; }
.sab-map-cell.high .smc-name { color:white; }
.smc-count { font-size:13px; font-weight:700; color:var(--soil); margin-top:2px; font-family:'Playfair Display',serif; }
.sab-map-cell.high .smc-count { color:white; }


/* â”€â”€ HISTORY CYCLE CARDS â”€â”€ */
.history-cycle-card {
  background:var(--white); border:1px solid var(--border);
  border-radius:14px; padding:14px; margin-bottom:10px;
}

/* â”€â”€ CLIENT SWITCHER â”€â”€ */
.ch-client-row {
  display:flex; align-items:center; gap:10px;
  padding:8px 10px; border-radius:10px; cursor:pointer;
  transition:background 0.15s;
}
.ch-client-row:hover  { background:rgba(255,255,255,0.08); }
.ch-client-row.active { background:rgba(107,143,110,0.2); }

/* â”€â”€ ONBOARDING DOTS â”€â”€ */
.onboard-dot {
  width:8px; height:8px; border-radius:50%;
  background:rgba(234,217,192,0.2); transition:all 0.3s;
}
.onboard-dot.active { background:var(--accent); width:24px; border-radius:4px; }

@keyframes popIn {
  0%   { transform: scale(0.5); opacity: 0; }
  100% { transform: scale(1);   opacity: 1; }
}

/* â”€â”€ SAGE FEATURE CHECKBOXES â”€â”€ */
.sage-feature-row { align-items: flex-start; padding: 10px 16px; }
.sage-checkbox {
  appearance: none; -webkit-appearance: none;
  width: 18px; height: 18px; border-radius: 5px; flex-shrink: 0;
  border: 2px solid rgba(107,143,110,0.4);
  background: transparent; cursor: pointer;
  margin-top: 2px; transition: all 0.2s; position: relative;
}
.sage-checkbox:checked {
  background: var(--sage); border-color: var(--sage);
}
.sage-checkbox:checked::after {
  content: 'âœ“'; position: absolute; top: -1px; left: 2px;
  font-size: 11px; color: white; font-weight: 700;
}
.sage-feature-row.disabled { opacity: 0.35; pointer-events: none; }

/* â”€â”€ SAGE POWER PILLS â”€â”€ */
.sage-power-pill {
  display: flex; gap: 10px; align-items: flex-start;
  background: white; border: 1.5px solid rgba(107,143,110,0.2);
  border-radius: 10px; padding: 9px 11px; cursor: pointer;
  transition: all 0.15s;
}
.sage-power-pill:hover { border-color: var(--sage); background: rgba(107,143,110,0.04); }
.sage-power-pill.selected {
  border-color: var(--sage); background: rgba(107,143,110,0.08);
  box-shadow: 0 0 0 1px rgba(107,143,110,0.3);
}

/* â”€â”€ SAGE POWER TAG ROW (Post Session) â”€â”€ */
.sage-power-tag-row {
  margin-top: 12px; padding-top: 12px;
  border-top: 1px dashed rgba(107,143,110,0.25);
}
.sage-tag-pill {
  background: white; border: 1.5px solid rgba(107,143,110,0.25);
  border-radius: 20px; padding: 5px 10px; font-size: 11px;
  color: rgba(107,143,110,0.8); cursor: pointer; font-family: 'DM Sans', sans-serif;
  transition: all 0.15s; white-space: nowrap;
}
.sage-tag-pill:hover { border-color: var(--sage); color: var(--sage); }
.sage-tag-pill.selected {
  background: var(--sage); border-color: var(--sage);
  color: white; font-weight: 500;
}
.sage-tag-hint {
  font-size: 11px; color: rgba(107,143,110,0.6);
  font-style: italic; margin-top: 7px; line-height: 1.4;
}

/* â”€â”€ PQ REP NUDGE â”€â”€ */
.pqrep-nudge {
  margin-top: 10px; border-top: 1px dashed rgba(107,143,110,0.25);
  padding-top: 8px; cursor: pointer;
}
.pqrep-collapsed {
  display: flex; align-items: center; gap: 6px;
}
.pqrep-label {
  font-size: 11px; color: var(--sage); flex: 1; font-weight: 500;
}
.pqrep-tap {
  font-size: 10px; color: rgba(107,143,110,0.5);
}
.pqrep-expanded {
  background: var(--sage-pale); border-radius: 10px;
  padding: 12px; margin-top: 6px;
  border: 1px solid rgba(107,143,110,0.2);
  animation: fadeIn 0.2s ease;
}
.pqrep-title {
  font-size: 11px; font-weight: 600; color: var(--sage); margin-bottom: 6px;
}
.pqrep-body {
  font-size: 12px; color: var(--text-mid); line-height: 1.6;
}
.pqrep-close {
  font-size: 11px; color: var(--sage); font-weight: 600;
  margin-top: 10px; text-align: right; cursor: pointer;
}

/* â”€â”€ SAGE ATTENTION LENS â”€â”€ */
.sage-attention-lens {
  background: var(--sage-pale);
  border: 1px solid rgba(107,143,110,0.25);
  border-radius: 10px;
  padding: 10px 12px;
  margin-bottom: 10px;
  border-left: 3px solid var(--sage);
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PHONE SHELL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="phone-wrapper"><div class="phone">

  <!-- â”€â”€ SCREEN 1: SPLASH â”€â”€ -->
  <div class="screen active" id="screen-splash">
    <div class="status-bar" style="background:var(--soil)">
      <span>9:41</span>
      <div class="status-icons"><span>â—â—â—</span><span>WiFi</span><span>ğŸ”‹</span></div>
    </div>
    <div class="splash-bg">
      <div class="splash-logo">Ground<span>work</span></div>
      <div class="splash-headline">The coaching companion that turns insight into action</div>
      <div class="splash-tag">The space between sessions where real change happens</div>
      <div class="splash-actions">
        <button class="btn btn-primary" onclick="show('screen-signup')">Create Coach Account</button>
        <button class="btn btn-secondary" style="background:rgba(255,255,255,0.08);color:var(--sand);border-color:rgba(255,255,255,0.15)" onclick="show('screen-dashboard')">Sign In</button>
        <div class="splash-divider">â€” or â€”</div>
        <button class="btn btn-ghost" style="color:var(--sand);opacity:0.5" onclick="show('screen-client-invite')">I'm a Client â†’</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 2: COACH SIGN UP â”€â”€ -->
  <div class="screen" id="screen-signup">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="form-header">
      <button class="back-btn" onclick="show('screen-splash')">â†</button>
      <h2>Create your account</h2>
      <p>Set up your coaching workspace</p>
    </div>
    <div class="scroll">
      <div class="form-body">
        <div class="input-group">
          <label class="input-label">Your Name</label>
          <input class="input" type="text" placeholder="First and last name" value="Jordan Rivera">
        </div>
        <div class="input-group">
          <label class="input-label">Email Address</label>
          <input class="input" type="email" placeholder="you@example.com" value="jordan@coachingco.com">
        </div>
        <div class="input-group">
          <label class="input-label">Password</label>
          <input class="input" type="password" placeholder="8+ characters" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        </div>

        <div class="divider"></div>

        <div class="input-label" style="margin-bottom:10px">Default Coaching Mode</div>
        <div class="mode-select-row">
          <div class="mode-card" id="mode-general" onclick="selectMode('general')">
            <div class="mode-card-icon">ğŸŒ±</div>
            <div class="mode-card-title">General</div>
            <div class="mode-card-sub">Universal resistance framework</div>
          </div>
          <div class="mode-card selected" id="mode-pq" onclick="selectMode('pq')">
            <div class="mode-card-icon">âœ¦</div>
            <div class="mode-card-title">PQ Coaching</div>
            <div class="mode-card-sub">Full Positive Intelligence framework</div>
          </div>
        </div>
        <p style="font-size:11px;color:var(--text-light);margin-bottom:24px;line-height:1.5">You can set the mode individually per client. This is just your default.</p>

        <button class="btn btn-primary" onclick="show('screen-onboarding')">Create Account â†’</button>
        <p style="text-align:center;font-size:11px;color:var(--text-light);margin-top:12px">By signing up you agree to our Terms of Service</p>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 3: COACH DASHBOARD â”€â”€ -->
  <div class="screen" id="screen-dashboard">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <div class="header-row">
        <div class="logo-text">Ground<span>work</span></div>
        <div class="avatar-circle" onclick="show('screen-settings')">JR</div>
      </div>
      <div class="header-greeting">Good morning, Coach Jordan</div>
      <div class="mode-indicator" style="margin-bottom:4px"></div>
      <div class="header-date">Friday, February 21</div>
      <div class="stats-row">
        <div class="stat-cell"><div class="stat-num">8</div><div class="stat-lbl">Clients</div></div>
        <div class="stat-cell"><div class="stat-num">24</div><div class="stat-lbl">Active Tasks</div></div>
        <div class="stat-cell"><div class="stat-num">71%</div><div class="stat-lbl">Completion</div></div>
        <div class="stat-cell"><div class="stat-num">3</div><div class="stat-lbl">Today</div></div>
      </div>
    </div>
    <div class="scroll">
      <div class="alert-card">
        <div class="pulse-dot"></div>
        <div class="alert-body">
          <div class="alert-title">Session in 45 min â€” Marcus Kim</div>
          <div class="alert-sub" id="alert-sub-text">2 of 4 complete Â· 1 saboteur flagged</div>
        </div>
        <button class="alert-btn" onclick="show('screen-client-detail')">Prep â†’</button>
      </div>

      <div class="insight-banner" onclick="show('screen-attention')" style="cursor:pointer" id="insight-banner">
        <div style="display:flex;align-items:center;gap:8px;width:100%">
          <div class="client-av" id="insight-banner-avatar" style="background:#B8943A;width:28px;height:28px;font-size:10px;flex-shrink:0">SK</div>
          <div style="flex:1">
            <div style="font-size:9px;font-weight:600;text-transform:uppercase;letter-spacing:0.6px;color:var(--resistance);opacity:0.7;margin-bottom:2px">Pattern alert Â· Sarah Kennedy</div>
            <div class="insight-text" id="insight-banner-text"><strong>Saboteur pattern:</strong> <em>Pleaser</em> flagged on 3 consecutive commitments around boundaries. Worth exploring Monday.</div>
          </div>
          <div style="font-size:11px;color:var(--resistance);opacity:0.5;flex-shrink:0">â†’</div>
        </div>
      </div>

      <div class="section">
        <div class="section-head">
          <div class="section-title">Your Clients</div>
          <div class="section-link">See all â†’</div>
        </div>

        <div class="client-card" style="animation-delay:0.05s" onclick="show('screen-client-detail')">
          <div class="client-card-top">
            <div class="client-av" style="background:#6B8F6E">MK</div>
            <div style="flex:1">
              <div class="client-name">Marcus Kim</div>
              <div class="client-meta">Session today Â· 10:30 AM Â· <span class="client-mode-tag"><span class="tag-pq">âœ¦ PQ</span></span></div>
            </div>
            <div class="badge badge-today">Today</div>
          </div>
          <div class="prog-meta"><span class="prog-label">Commitments</span><span class="prog-count">2 of 4</span></div>
          <div class="prog-track"><div class="prog-fill" style="width:50%;background:var(--pending)"></div></div>
          <div>
            <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Morning journaling 3x this week</div></div>
            <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Call mentor by Wednesday</div></div>
            <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text">Draft business plan outline</div><span id="card1-resist"><div class="sab-tag">Controller</div></span></div>
            <div class="commit-row"><div class="commit-dot dot-pending"></div><div class="commit-text">30 min daily walk</div></div>
          </div>
        </div>

        <div class="client-card" style="animation-delay:0.1s" onclick="show('screen-attention')">
          <div class="client-card-top">
            <div class="client-av" style="background:#B8943A">SK</div>
            <div style="flex:1">
              <div class="client-name">Sarah Kennedy</div>
              <div class="client-meta">Next session Â· Mon Feb 24 Â· <span class="client-mode-tag"><span class="tag-pq">âœ¦ PQ</span></span></div>
            </div>
            <div class="badge badge-alert" onclick="event.stopPropagation();show('screen-attention')" style="cursor:pointer">Attention</div>
          </div>
          <div class="prog-meta"><span class="prog-label">Commitments</span><span class="prog-count">1 of 3</span></div>
          <div class="prog-track"><div class="prog-fill" style="width:33%;background:var(--resistance)"></div></div>
          <div>
            <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Review Q1 budget</div></div>
            <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text">Meet with financial advisor</div><span id="card2-resist1"><div class="sab-tag">Pleaser</div></span></div>
            <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text">Write personal financial vision</div><span id="card2-resist2"><div class="sab-tag">Pleaser</div></span></div>
          </div>
        </div>

        <div class="client-card" style="animation-delay:0.15s" onclick="show('screen-client-detail')">
          <div class="client-card-top">
            <div class="client-av" style="background:#4A7B9D">DP</div>
            <div style="flex:1">
              <div class="client-name">David Park</div>
              <div class="client-meta">Next session Â· Tue Feb 25</div>
            </div>
            <div class="badge badge-good">On Track</div>
          </div>
          <div class="prog-meta"><span class="prog-label">Commitments</span><span class="prog-count">3 of 4</span></div>
          <div class="prog-track"><div class="prog-fill" style="width:75%;background:var(--complete)"></div></div>
          <div>
            <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Identify 3 networking events</div></div>
            <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Update LinkedIn profile</div></div>
            <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Send follow-up to 2 contacts</div></div>
            <div class="commit-row"><div class="commit-dot dot-pending"></div><div class="commit-text">Read chapter 3 of Deep Work</div></div>
          </div>
        </div>

      </div>
    </div>

    <button class="fab" onclick="show('screen-add-client')">+</button>

    <div class="bottom-nav">
      <button class="nav-btn active" onclick="show('screen-dashboard')"><span class="nav-icon">âŒ‚</span><span class="nav-lbl">Home</span></button>
      <button class="nav-btn" onclick="show('screen-dashboard')"><span class="nav-icon">â—</span><span class="nav-lbl">Clients</span></button>
      <button class="nav-btn" onclick="show('screen-insights')"><span class="nav-icon">â—ˆ</span><span class="nav-lbl">Insights</span></button>
      <button class="nav-btn" onclick="show('screen-settings')"><span class="nav-icon">â—‡</span><span class="nav-lbl">Settings</span></button>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 4: ADD CLIENT â”€â”€ -->
  <div class="screen" id="screen-add-client">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <div class="header-row">
        <div class="logo-text">Ground<span>work</span></div>
        <button class="back-btn" style="margin:0;font-size:16px" onclick="show('screen-dashboard')">â† Back</button>
      </div>
    </div>
    <div class="scroll">
      <div style="padding:20px">
        <h2 style="margin-bottom:6px">Add New Client</h2>
        <p style="margin-bottom:24px;font-size:13px">They'll receive an email invitation to join Groundwork.</p>

        <div class="input-group">
          <label class="input-label">Client Name</label>
          <input class="input" id="new-client-name" type="text" placeholder="First and last name">
        </div>
        <div class="input-group">
          <label class="input-label">Client Email</label>
          <input class="input" id="new-client-email" type="email" placeholder="client@email.com">
        </div>
        <div class="input-group">
          <label class="input-label">Next Session Date</label>
          <input class="input" type="date">
        </div>

        <div class="divider"></div>

        <div class="input-label" style="margin-bottom:10px">Coaching Mode for This Client</div>
        <div class="mode-select-row">
          <div class="mode-card" id="add-mode-general" onclick="selectAddMode('general')">
            <div class="mode-card-icon">ğŸŒ±</div>
            <div class="mode-card-title">General</div>
            <div class="mode-card-sub">Universal resistance framework</div>
          </div>
          <div class="mode-card selected" id="add-mode-pq" onclick="selectAddMode('pq')">
            <div class="mode-card-icon">âœ¦</div>
            <div class="mode-card-title">PQ Coaching</div>
            <div class="mode-card-sub">Full Positive Intelligence framework</div>
          </div>
        </div>
        <p style="font-size:11px;color:var(--text-light);margin-bottom:4px;line-height:1.5">Your default is <strong style="color:var(--accent)">PQ Coaching</strong> â€” change for this client if needed. You can also update this anytime from the client's profile.</p>

        <div class="divider"></div>

        <button class="btn btn-primary" onclick="sendInvitation()" style="margin-bottom:10px">Send Invitation â†’</button>
        <button class="btn btn-ghost" onclick="show('screen-dashboard')">Cancel</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 5: CLIENT DETAIL (Coach Pre-Session View) â”€â”€ -->
  <div class="screen" id="screen-client-detail">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="detail-header">
      <button class="back-btn" onclick="show('screen-dashboard')">â†</button>
      <div class="detail-client-row">
        <div class="detail-av" style="background:#6B8F6E">MK</div>
        <div>
          <div class="detail-name">Marcus Kim</div>
          <div class="detail-meta"><span class="client-session-mode">PQ Coaching</span> Â· Session today 10:30 AM</div>
        </div>
      </div>
      <div class="detail-stats">
        <div class="detail-stat"><div class="detail-stat-num">2</div><div class="detail-stat-lbl">Done</div></div>
        <div class="detail-stat"><div class="detail-stat-num">1</div><div class="detail-stat-lbl">Resisted</div></div>
        <div class="detail-stat"><div class="detail-stat-num">1</div><div class="detail-stat-lbl">Pending</div></div>
        <div class="detail-stat"><div class="detail-stat-num">67%</div><div class="detail-stat-lbl">All-time</div></div>
      </div>
    </div>
    <div class="scroll">
      <div id="dom-pattern-banner"><div class="insight-banner" style="margin:16px 16px 0"><div class="insight-icon">âœ¦</div><div class="insight-text" style="color:var(--sage)"><strong>Dominant Saboteur:</strong> Controller has appeared in 5 of last 8 resistance flags. Marcus tends to resist when he feels he's not in charge of outcomes.</div></div></div>

      <div class="section">
        <div class="section-head"><div class="section-title">Current Commitments</div></div>

        <div class="client-commit-card">
          <div class="commit-card-top">
            <div class="commit-checkbox checked"></div>
            <div>
              <div class="commit-card-title done">Morning journaling 3x this week</div>
              <div class="commit-due">Due Feb 20 Â· Completed âœ“</div>
            </div>
          </div>
        </div>

        <div class="client-commit-card">
          <div class="commit-card-top">
            <div class="commit-checkbox checked"></div>
            <div>
              <div class="commit-card-title done">Call mentor by Wednesday</div>
              <div class="commit-due">Due Feb 19 Â· Completed âœ“</div>
            </div>
          </div>
        </div>

        <div class="client-commit-card" style="border-color:rgba(184,92,92,0.3);background:var(--resistance-pale)">
          <div class="commit-card-top">
            <div class="commit-checkbox"></div>
            <div style="flex:1">
              <div class="commit-card-title">Draft business plan outline</div>
              <div class="commit-due">Due Feb 21 Â· <span style="color:var(--resistance)">Resistance flagged</span></div>
            </div>
            <div class="sab-tag">Controller</div>
          </div>
          <div style="margin-top:10px;padding:8px 10px;background:white;border-radius:8px;font-size:12px;color:var(--text-mid);border-left:3px solid var(--resistance)">
            <strong style="color:var(--resistance);font-size:11px"><span id="detail-resist-note">Controller</span> â€” Marcus noted:</strong><br>
            "I keep wanting to wait until I have all the information before I start writing anything down."
          </div>
        </div>

        <div class="client-commit-card">
          <div class="commit-card-top">
            <div class="commit-checkbox"></div>
            <div>
              <div class="commit-card-title">30 min daily walk</div>
              <div class="commit-due">Ongoing Â· Not yet checked in</div>
            </div>
          </div>
          <div class="commit-prompt">Reflection: What did you notice about your energy on days you walked vs days you didn't?</div>
        </div>
      </div>

      <div class="section" style="padding-bottom:20px">
        <div class="section-head"><div class="section-title">Session Notes</div></div>
        <textarea class="input" rows="3" placeholder="Private notes for this session... (not visible to client)">Controller showing up strongly around the business plan. Explore the fear underneath the need for control.</textarea>
        <button class="btn btn-primary" style="margin-top:16px" onclick="show('screen-post-session')">End Session â€” Add New Commitments â†’</button>
        <button class="btn btn-secondary" style="margin-top:10px" onclick="show('screen-coach-history')">View Full History â†’</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 6: POST-SESSION / ADD COMMITMENTS â”€â”€ -->
  <div class="screen" id="screen-post-session">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <button class="back-btn" onclick="show('screen-client-detail')">â†</button>
      <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:16px">Post-Session Â· Marcus Kim</div>
      <div style="color:var(--sand);font-size:12px;opacity:0.5;margin-top:4px">Add commitments from today's session</div>
    </div>
    <div class="scroll">
      <div style="padding:20px">

        <div class="commit-entry">
          <div class="commit-num">1</div>
          <div class="input-group" style="margin-bottom:10px">
            <label class="input-label">Commitment</label>
            <input class="input" type="text" value="Write a 1-page business plan outline â€” imperfect is fine">
          </div>
          <div style="display:flex;gap:10px">
            <div class="input-group" style="flex:1;margin:0">
              <label class="input-label">Due Date</label>
              <input class="input" type="date" style="font-size:13px;padding:10px 12px">
            </div>
          </div>
          <div class="input-group" style="margin-top:10px;margin-bottom:0">
            <label class="input-label">Reflection Prompt (optional)</label>
            <input class="input" type="text" placeholder="What do you want them to notice?" style="font-size:13px" value="What happened when you let go of 'perfect' and just started writing?">
          </div>

          <div class="sage-power-tag-row" id="sage-tag-row-1">
            <label class="input-label" style="margin-bottom:6px">âœ¦ Sage power for this commitment</label>
            <div style="display:flex;gap:5px;flex-wrap:wrap">
              <button class="sage-tag-pill" data-power="Empathize" onclick="selectSageTag(this,'Empathize',1)">ğŸ’› Empathize</button>
              <button class="sage-tag-pill" data-power="Explore" onclick="selectSageTag(this,'Explore',1)">ğŸ” Explore</button>
              <button class="sage-tag-pill" data-power="Innovate" onclick="selectSageTag(this,'Innovate',1)">ğŸ’¡ Innovate</button>
              <button class="sage-tag-pill" data-power="Navigate" onclick="selectSageTag(this,'Navigate',1)">ğŸ§­ Navigate</button>
              <button class="sage-tag-pill" data-power="Activate" onclick="selectSageTag(this,'Activate',1)">âš¡ Activate</button>
            </div>
            <div class="sage-tag-hint" id="sage-tag-hint-1">Tap one or more powers that fit this commitment</div>
          </div>
        </div>

        <div class="commit-entry">
          <div class="commit-num">2</div>
          <button class="remove-btn">âœ•</button>
          <div class="input-group" style="margin-bottom:10px">
            <label class="input-label">Commitment</label>
            <input class="input" type="text" value="Daily 30 min walk â€” no phone">
          </div>
          <div style="display:flex;gap:10px">
            <div class="input-group" style="flex:1;margin:0">
              <label class="input-label">Due Date</label>
              <input class="input" type="date" style="font-size:13px;padding:10px 12px">
            </div>
          </div>
          <div class="input-group" style="margin-top:10px;margin-bottom:0">
            <label class="input-label">Reflection Prompt (optional)</label>
            <input class="input" type="text" placeholder="What do you want them to notice?" style="font-size:13px">
          </div>

          <div class="sage-power-tag-row" id="sage-tag-row-2">
            <label class="input-label" style="margin-bottom:6px">âœ¦ Sage power for this commitment</label>
            <div style="display:flex;gap:5px;flex-wrap:wrap">
              <button class="sage-tag-pill" data-power="Empathize" onclick="selectSageTag(this,'Empathize',2)">ğŸ’› Empathize</button>
              <button class="sage-tag-pill" data-power="Explore" onclick="selectSageTag(this,'Explore',2)">ğŸ” Explore</button>
              <button class="sage-tag-pill" data-power="Innovate" onclick="selectSageTag(this,'Innovate',2)">ğŸ’¡ Innovate</button>
              <button class="sage-tag-pill" data-power="Navigate" onclick="selectSageTag(this,'Navigate',2)">ğŸ§­ Navigate</button>
              <button class="sage-tag-pill" data-power="Activate" onclick="selectSageTag(this,'Activate',2)">âš¡ Activate</button>
            </div>
            <div class="sage-tag-hint" id="sage-tag-hint-2">Tap one or more powers that fit this commitment</div>
          </div>
        </div>

        <button class="add-commit-btn">+ Add Another Commitment</button>

        <div class="input-group">
          <label class="input-label">Session Summary (sent to client)</label>
          <textarea class="input" rows="3" placeholder="Brief summary of today's session themes...">We explored how the Controller saboteur is showing up around the business plan. Your homework is to practice 'good enough' â€” start imperfect and iterate.</textarea>
        </div>

        <button class="btn btn-primary" onclick="show('screen-session-confirm')">Send to Marcus â†’</button>
        <p style="font-size:11px;color:var(--text-light);text-align:center;margin-top:8px">Marcus will be notified immediately</p>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 7: CLIENT VIEW â”€â”€ -->
  <div class="screen" id="screen-client">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="client-screen-header">
      <div class="logo-text">Ground<span>work</span></div>
      <div class="client-name-header">Marcus Kim</div>
      <div class="client-coach-tag">Coach: Jordan Rivera Â· PQ Coaching</div>
    </div>
    <div class="scroll">
      <div style="padding:20px 20px 0;text-align:center">
        <div class="ring-text">2 / 4</div>
        <div class="ring-sub">commitments complete this cycle</div>
      </div>

      <div class="section">
        <div class="section-head"><div class="section-title">Your Commitments</div></div>

        <div class="client-commit-card">
          <div class="commit-card-top">
            <div class="commit-checkbox checked"></div>
            <div>
              <div class="commit-card-title done">Morning journaling 3x this week</div>
              <div class="commit-due">Completed âœ“</div>
            </div>
          </div>
        </div>

        <div class="client-commit-card">
          <div class="commit-card-top">
            <div class="commit-checkbox checked"></div>
            <div>
              <div class="commit-card-title done">Call mentor by Wednesday</div>
              <div class="commit-due">Completed âœ“</div>
            </div>
          </div>
        </div>

        <div class="client-commit-card" style="border-color:var(--accent)">
          <div class="commit-card-top" onclick="show('screen-checkin')" style="cursor:pointer">
            <div class="commit-checkbox"></div>
            <div style="flex:1">
              <div class="commit-card-title">Write a 1-page business plan outline</div>
              <div class="commit-due">Due Feb 28 Â· Tap to check in</div>
            </div>
          </div>
          <div class="commit-prompt">What happened when you let go of 'perfect' and just started writing?</div>
          <div class="pqrep-nudge" id="pqrep-1" onclick="expandPQRep(this)">
            <div class="pqrep-collapsed">
              <span style="color:var(--sage);font-size:11px">âœ¦</span>
              <span class="pqrep-label">10-sec PQ Rep Â· Controller showing up?</span>
              <span class="pqrep-tap">Tap â†’</span>
            </div>
            <div class="pqrep-expanded" style="display:none">
              <div class="pqrep-title">âœ¦ PQ Rep â€” Activate your Sage</div>
              <div class="pqrep-body">Feel your feet on the floor. Take one slow breath. Now ask: <em>"What's the smallest possible version of this I could start right now â€” imperfect and that's okay?"</em></div>
              <div class="pqrep-close" onclick="collapsePQRep(event, this)">Done âœ“</div>
            </div>
          </div>
        </div>

        <div class="client-commit-card">
          <div class="commit-card-top" onclick="show('screen-checkin')" style="cursor:pointer">
            <div class="commit-checkbox"></div>
            <div>
              <div class="commit-card-title">Daily 30 min walk â€” no phone</div>
              <div class="commit-due">Ongoing Â· Tap to check in</div>
            </div>
          </div>
          <div class="pqrep-nudge" id="pqrep-2" onclick="expandPQRep(this)">
            <div class="pqrep-collapsed">
              <span style="color:var(--sage);font-size:11px">âœ¦</span>
              <span class="pqrep-label">10-sec PQ Rep Â· Before you go</span>
              <span class="pqrep-tap">Tap â†’</span>
            </div>
            <div class="pqrep-expanded" style="display:none">
              <div class="pqrep-title">âœ¦ PQ Rep â€” Activate</div>
              <div class="pqrep-body">Feel the ground under you. Notice three things you can hear right now. Then take your first step â€” your Sage is already moving.</div>
              <div class="pqrep-close" onclick="collapsePQRep(event, this)">Done âœ“</div>
            </div>
          </div>
        </div>
      </div>

      <div id="sage-panel"><div style="padding:16px 20px"><div style="background:var(--sage-pale);border-radius:14px;padding:14px;border:1px solid rgba(107,143,110,0.2)"><div style="font-size:12px;color:var(--sage);font-weight:500;margin-bottom:4px">âœ¦ Your Sage is watching</div><div style="font-size:12px;color:var(--text-mid);line-height:1.5">When you notice resistance, pause and ask: <em>"What would my Sage know that my saboteur is hiding?"</em></div></div></div></div>
    </div>

    <div class="bottom-nav">
      <button class="nav-btn active"><span class="nav-icon">âŒ‚</span><span class="nav-lbl">Home</span></button>
      <button class="nav-btn" onclick="show('screen-history')"><span class="nav-icon">â—</span><span class="nav-lbl">History</span></button>
      <button class="nav-btn" onclick="show('screen-settings-client')"><span class="nav-icon">â—‡</span><span class="nav-lbl">Settings</span></button>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 8: CLIENT CHECK-IN â”€â”€ -->
  <div class="screen" id="screen-checkin">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header" style="padding-bottom:20px">
      <button class="back-btn" onclick="show('screen-client')">â†</button>
      <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:16px">Check In</div>
      <div style="color:var(--sand);font-size:13px;opacity:0.7;margin-top:8px;line-height:1.4">Write a 1-page business plan outline</div>
    </div>
    <div class="scroll">
      <div style="padding:20px">

        <div class="input-label" style="margin-bottom:10px">How is it going?</div>
        <div class="checkin-status-row">
          <div class="status-pill sel-done" onclick="selectStatus(this,'done')">
            <span class="status-pill-icon">âœ“</span>Done
          </div>
          <div class="status-pill" onclick="selectStatus(this,'prog')">
            <span class="status-pill-icon">â—‘</span>In Progress
          </div>
          <div class="status-pill" onclick="selectStatus(this,'notdone')">
            <span class="status-pill-icon">â—‹</span>Not Done
          </div>
        </div>

        <div id="resistance-section" style="display:none">
          <div class="divider"></div>
          <div class="input-label" style="margin-bottom:10px" id="resist-label">Is a saboteur showing up?</div>
          <div id="resist-grid-container">
            <div class="pq-sab-grid" id="resist-options">
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Judge</div><div class="sab-desc">Self-criticism, nothing's good enough</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Controller</div><div class="sab-desc">Need to control the outcome first</div></div>
              <div class="sab-pill selected" onclick="selectResist(this)"><div class="sab-name">Avoider</div><div class="sab-desc">Avoiding difficult or unclear tasks</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Hyper-Achiever</div><div class="sab-desc">Has to be perfect or not worth doing</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Stickler</div><div class="sab-desc">Waiting for exactly the right moment</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Pleaser</div><div class="sab-desc">Other people's needs came first</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Victim</div><div class="sab-desc">Felt overwhelmed or hopeless</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Restless</div><div class="sab-desc">Got distracted by other things</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Hyper-Rational</div><div class="sab-desc">Over-thinking, analysis paralysis</div></div>
              <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Hyper-Vigilant</div><div class="sab-desc">Fear of what might go wrong</div></div>
              <div class="sab-pill" onclick="selectResist(this)" style="grid-column:span 2"><div class="sab-name">Life Happened</div><div class="sab-desc">Genuine external circumstance got in the way</div></div>
            </div>
          </div>

          <!-- Saboteur detail field -->
          <div class="input-group" style="margin-top:14px" id="saboteur-detail-container">
            <label class="input-label" id="saboteur-detail-label">Tell us more about what's happening</label>
            <textarea class="input" rows="3" placeholder="What is the saboteur telling you? What does it feel like? (shared with your coach)" style="font-size:13px"></textarea>
          </div>

        <div id="sage-checkin-container">
          <div style="background:var(--sage-pale);border-radius:14px;padding:14px;margin-bottom:16px;border:1px solid rgba(107,143,110,0.25)">

            <div style="display:flex;align-items:center;gap:6px;margin-bottom:6px">
              <div style="font-size:13px;color:var(--sage)">âœ¦</div>
              <div style="font-size:13px;font-weight:600;color:var(--sage);font-family:'Playfair Display',serif">What does your Sage know?</div>
            </div>
            <div style="font-size:11px;color:rgba(107,143,110,0.75);margin-bottom:12px;line-height:1.5">Your Sage sees this differently. Which power wants to respond?</div>

            <!-- Five Sage power pills -->
            <div style="display:flex;flex-direction:column;gap:6px;margin-bottom:12px" id="sage-power-pills">
              <div class="sage-power-pill" onclick="selectSagePower(this)" data-power="Empathize">
                <div style="font-size:13px">ğŸ’›</div>
                <div style="flex:1">
                  <div style="font-size:12px;font-weight:600;color:var(--sage)">Empathize</div>
                  <div style="font-size:11px;color:rgba(107,143,110,0.7)">Bring compassion to yourself â€” you're doing your best</div>
                </div>
              </div>
              <div class="sage-power-pill" onclick="selectSagePower(this)" data-power="Explore">
                <div style="font-size:13px">ğŸ”</div>
                <div style="flex:1">
                  <div style="font-size:12px;font-weight:600;color:var(--sage)">Explore</div>
                  <div style="font-size:11px;color:rgba(107,143,110,0.7)">Get curious â€” what might this be trying to show you?</div>
                </div>
              </div>
              <div class="sage-power-pill selected" onclick="selectSagePower(this)" data-power="Innovate">
                <div style="font-size:13px">ğŸ’¡</div>
                <div style="flex:1">
                  <div style="font-size:12px;font-weight:600;color:var(--sage)">Innovate</div>
                  <div style="font-size:11px;color:rgba(107,143,110,0.7)">What's a new way to approach this that you haven't tried?</div>
                </div>
              </div>
              <div class="sage-power-pill" onclick="selectSagePower(this)" data-power="Navigate">
                <div style="font-size:13px">ğŸ§­</div>
                <div style="flex:1">
                  <div style="font-size:12px;font-weight:600;color:var(--sage)">Navigate</div>
                  <div style="font-size:11px;color:rgba(107,143,110,0.7)">What do your values say about what matters most here?</div>
                </div>
              </div>
              <div class="sage-power-pill" onclick="selectSagePower(this)" data-power="Activate">
                <div style="font-size:13px">âš¡</div>
                <div style="flex:1">
                  <div style="font-size:12px;font-weight:600;color:var(--sage)">Activate</div>
                  <div style="font-size:11px;color:rgba(107,143,110,0.7)">What's one small step you could take right now?</div>
                </div>
              </div>
            </div>

            <!-- Sage response text field -->
            <div style="font-size:11px;color:rgba(107,143,110,0.7);margin-bottom:6px;font-weight:500" id="sage-response-prompt-label">What would your Sage say? <span style="font-weight:400;font-style:italic">(shared with your coach)</span></div>
            <textarea class="input" rows="2" id="sage-response-text" placeholder="Let your Sage speak..." style="background:white;font-size:13px;border-color:rgba(107,143,110,0.3)"></textarea>
          </div>
        </div>
        </div>

        <div class="divider"></div>
        <div class="input-group">
          <label class="input-label">Reflection Prompt from Your Coach</label>
          <div style="font-size:13px;color:var(--clay);font-style:italic;margin-bottom:10px;padding:10px;background:var(--accent-pale);border-radius:8px;border-left:3px solid var(--accent)">What happened when you let go of 'perfect' and just started writing?</div>
          <textarea class="input" rows="3" placeholder="Your reflection... (shared with your coach)">I actually started and got 3 paragraphs in before my inner critic took over. But I have something on paper now.</textarea>
        </div>


        <button class="btn btn-primary" onclick="show('screen-checkin-confirm')">Submit Check-In â†’</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 9: SETTINGS (Coach) â”€â”€ -->
  <div class="screen" id="screen-settings">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <button class="back-btn" onclick="show('screen-dashboard')">â†</button>
      <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:20px;margin-top:8px">Coach Settings</div>
    </div>
    <div class="scroll">
      <div style="padding:20px">

        <div class="settings-group">
          <div class="settings-group-title">Profile</div>
          <div class="settings-row">
            <div class="settings-row-icon">ğŸ‘¤</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Jordan Rivera</div>
              <div class="settings-row-sub">jordan@coachingco.com</div>
            </div>
            <div style="font-size:12px;color:var(--clay)">Edit</div>
          </div>
          <div class="settings-row">
            <div class="settings-row-icon">âœ¦</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Default Mode</div>
              <div class="settings-row-sub" id="settings-default-mode">PQ Coaching</div>
            </div>
            <div style="font-size:12px;color:var(--clay)">Change</div>
          </div>
        </div>

        <div class="settings-group" id="sage-settings-group">
          <div class="settings-group-title" style="display:flex;align-items:center;justify-content:space-between">
            <span>âœ¦ Sage Features</span>
            <button class="toggle on" id="sage-master-toggle" onclick="toggleSageMaster()"></button>
          </div>
          <div style="font-size:12px;color:var(--text-light);padding:0 16px 12px;line-height:1.5">Enable Sage-powered prompts and insights across the app. Turn individual features on or off below.</div>

          <div id="sage-feature-list">
            <div class="settings-row sage-feature-row">
              <div class="settings-row-body" style="padding-left:4px">
                <div class="settings-row-title" style="font-size:13px">Check-in Sage prompt</div>
                <div class="settings-row-sub">Ask clients "what does your Sage know?" after flagging a saboteur</div>
              </div>
              <input type="checkbox" class="sage-checkbox" id="sage-checkin" checked onchange="syncSageCheckboxes()">
            </div>
            <div class="settings-row sage-feature-row">
              <div class="settings-row-body" style="padding-left:4px">
                <div class="settings-row-title" style="font-size:13px">Sage power tagging</div>
                <div class="settings-row-sub">Tag each commitment with a Sage power when setting session notes</div>
              </div>
              <input type="checkbox" class="sage-checkbox" id="sage-tagging" checked onchange="syncSageCheckboxes()">
            </div>
            <div class="settings-row sage-feature-row">
              <div class="settings-row-body" style="padding-left:4px">
                <div class="settings-row-title" style="font-size:13px">PQ Rep reminders</div>
                <div class="settings-row-sub">Show 10-second PQ Rep nudges on client commitment cards</div>
              </div>
              <input type="checkbox" class="sage-checkbox" id="sage-pqrep" checked onchange="syncSageCheckboxes()">
            </div>
            <div class="settings-row sage-feature-row">
              <div class="settings-row-body" style="padding-left:4px">
                <div class="settings-row-title" style="font-size:13px">Sage lens on attention alerts</div>
                <div class="settings-row-sub">Suggest a Sage power coaching angle on flagged resistance patterns</div>
              </div>
              <input type="checkbox" class="sage-checkbox" id="sage-attention" checked onchange="syncSageCheckboxes()">
            </div>
            <div class="settings-row sage-feature-row">
              <div class="settings-row-body" style="padding-left:4px">
                <div class="settings-row-title" style="font-size:13px">Sage power tracking</div>
                <div class="settings-row-sub">Track which Sage powers clients draw on in history and insights</div>
              </div>
              <input type="checkbox" class="sage-checkbox" id="sage-tracking" checked onchange="syncSageCheckboxes()">
            </div>
            <div class="settings-row sage-feature-row" style="border:none">
              <div class="settings-row-body" style="padding-left:4px">
                <div class="settings-row-title" style="font-size:13px">Sage onboarding intro</div>
                <div class="settings-row-sub">Include Sage powers introduction in the coach walkthrough</div>
              </div>
              <input type="checkbox" class="sage-checkbox" id="sage-onboarding" checked onchange="syncSageCheckboxes()">
            </div>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">Coach Notifications</div>
          <div class="settings-row">
            <div class="settings-row-icon">âœ“</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Client completes a commitment</div>
              <div class="settings-row-sub">Get notified when a client checks off a task</div>
            </div>
            <button class="toggle on" onclick="this.classList.toggle('on')"></button>
          </div>
          <div class="settings-row">
            <div class="settings-row-icon">âš‘</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Client flags resistance</div>
              <div class="settings-row-sub">Notified immediately when a saboteur is flagged</div>
            </div>
            <button class="toggle on" onclick="this.classList.toggle('on')"></button>
          </div>
          <div class="settings-row">
            <div class="settings-row-icon">â°</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Client overdue on commitment</div>
              <div class="settings-row-sub">Alert when a due date passes with no check-in</div>
            </div>
            <button class="toggle on" onclick="this.classList.toggle('on')"></button>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">Subscription</div>
          <div class="settings-row">
            <div class="settings-row-icon">â˜…</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Pro Plan Â· $39/month</div>
              <div class="settings-row-sub">Up to 15 active clients Â· Renews Mar 21</div>
            </div>
            <div style="font-size:12px;color:var(--clay)">Manage</div>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">Account</div>
          <div class="settings-row">
            <div class="settings-row-icon">ğŸ”’</div>
            <div class="settings-row-body"><div class="settings-row-title">Change Password</div></div>
            <div style="font-size:12px;color:var(--clay)">â†’</div>
          </div>
          <div class="settings-row" style="cursor:pointer">
            <div class="settings-row-icon">â†©</div>
            <div class="settings-row-body"><div class="settings-row-title" style="color:var(--resistance)">Sign Out</div></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 10: SETTINGS (Client) â”€â”€ -->
  <div class="screen" id="screen-settings-client">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <button class="back-btn" onclick="show('screen-client')">â†</button>
      <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:18px">Settings</div>
    </div>
    <div class="scroll">
      <div style="padding:20px">

        <div class="settings-group">
          <div class="settings-group-title">Profile</div>
          <div class="settings-row">
            <div class="settings-row-icon">ğŸ‘¤</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Marcus Kim</div>
              <div class="settings-row-sub">marcus@email.com</div>
            </div>
            <div style="font-size:12px;color:var(--clay)">Edit</div>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">My Notifications</div>
          <div class="settings-row">
            <div class="settings-row-icon">ğŸ“‹</div>
            <div class="settings-row-body">
              <div class="settings-row-title">New commitments from coach</div>
              <div class="settings-row-sub">When your coach adds tasks after a session</div>
            </div>
            <button class="toggle on" onclick="this.classList.toggle('on')"></button>
          </div>
          <div class="settings-row">
            <div class="settings-row-icon">â°</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Due date reminders</div>
              <div class="settings-row-sub">Reminder the day before a commitment is due</div>
            </div>
            <button class="toggle on" onclick="this.classList.toggle('on')"></button>
          </div>
          <div class="settings-row">
            <div class="settings-row-icon">ğŸ””</div>
            <div class="settings-row-body">
              <div class="settings-row-title">Overdue nudge</div>
              <div class="settings-row-sub">Gentle reminder when a commitment passes its due date</div>
            </div>
            <button class="toggle" onclick="this.classList.toggle('on')"></button>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">Account</div>
          <div class="settings-row" style="cursor:pointer">
            <div class="settings-row-icon">â†©</div>
            <div class="settings-row-body"><div class="settings-row-title" style="color:var(--resistance)">Sign Out</div></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 11: ATTENTION SUMMARY â”€â”€ -->
  <div class="screen" id="screen-attention">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header" style="padding-bottom:20px">
      <button class="back-btn" onclick="show('screen-dashboard')">â†</button>
      <div style="display:flex;align-items:center;gap:12px;margin-top:4px">
        <div class="client-av" style="background:#B8943A;width:48px;height:48px;font-size:16px">SK</div>
        <div>
          <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:18px">Sarah Kennedy</div>
          <div style="color:var(--sand);font-size:11px;opacity:0.5;margin-top:2px">Next session Â· Mon Feb 24 Â· âœ¦ PQ Coaching</div>
        </div>
      </div>
    </div>
    <div class="scroll">

      <div style="margin:16px 20px 0;padding:14px 16px;background:var(--resistance-pale);border:1px solid rgba(184,92,92,0.2);border-radius:14px;display:flex;gap:10px;align-items:center">
        <div style="font-size:22px">âš‘</div>
        <div>
          <div style="font-size:14px;font-weight:600;color:var(--resistance)">3 items need your attention</div>
          <div style="font-size:11px;color:var(--resistance);opacity:0.7;margin-top:2px">Session in 3 days Â· Mon Feb 24</div>
        </div>
      </div>

      <div class="section">
        <div class="section-head"><div class="section-title">Flagged Items</div></div>

        <!-- Item 1 â€” Resistance: Pleaser -->
        <div style="background:var(--white);border:1.5px solid rgba(184,92,92,0.25);border-radius:16px;padding:16px;margin-bottom:12px;">
          <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:10px">
            <div style="background:var(--resistance-pale);border-radius:8px;padding:6px 8px;flex-shrink:0;font-size:16px">âš‘</div>
            <div style="flex:1">
              <div style="font-size:12px;font-weight:600;color:var(--resistance);margin-bottom:3px" id="attention-flag-label-1">Resistance Flagged</div>
              <div style="font-size:14px;font-weight:500;color:var(--soil);line-height:1.3">Meet with financial advisor</div>
              <div style="display:flex;align-items:center;gap:6px;margin-top:6px">
                <span id="attention-tag-1"><div class="sab-tag">Pleaser</div></span>
                <div style="font-size:11px;color:var(--text-light)">Flagged 2 days ago</div>
              </div>
            </div>
          </div>
          <div style="background:var(--morning);border-radius:10px;padding:10px 12px;margin-bottom:10px;border-left:3px solid var(--resistance)">
            <div style="font-size:10px;font-weight:600;color:var(--resistance);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Sarah noted</div>
            <div style="font-size:12px;color:var(--text-mid);line-height:1.5;font-style:italic">"I kept saying yes to other people's requests and couldn't find a time that worked. I think I was also avoiding it."</div>
          </div>
          <div id="attention-insight-1"><div style="background:var(--sage-pale);border-radius:10px;padding:10px 12px;margin-bottom:12px;border-left:3px solid var(--sage)"><div style="font-size:10px;font-weight:600;color:var(--sage);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">âœ¦ Saboteur Pattern</div><div style="font-size:12px;color:var(--text-mid);line-height:1.5">This is Sarah's <strong>3rd consecutive</strong> Pleaser flag around financial commitments. Her need for others' approval may be blocking financial self-advocacy.</div></div></div>
          <div class="sage-attention-lens" id="sage-lens-1">
            <div style="display:flex;align-items:center;gap:6px;margin-bottom:5px">
              <span style="font-size:11px;color:var(--sage)">âœ¦</span>
              <span style="font-size:10px;font-weight:700;color:var(--sage);text-transform:uppercase;letter-spacing:0.6px">Sage Coaching Angle</span>
            </div>
            <div style="font-size:12px;color:var(--text-mid);line-height:1.6">
              <strong style="color:var(--sage)">ğŸ§­ Navigate</strong> â€” Sarah's Pleaser keeps overriding her own values. Ask her: <em>"What would the version of you who fully trusts her own judgment decide here?"</em> Help her connect this commitment to what she actually wants her financial life to look like.
            </div>
          </div>
          <button class="btn btn-sm agenda-btn" id="agenda-btn-1" onclick="addToAgenda(this,'Meet with financial advisor')" style="background:var(--accent-pale);color:var(--accent);border:1.5px solid rgba(196,123,63,0.3);font-size:12px">+ Add to Session Agenda</button>
        </div>

        <!-- Item 2 â€” Resistance: Pleaser -->
        <div style="background:var(--white);border:1.5px solid rgba(184,92,92,0.25);border-radius:16px;padding:16px;margin-bottom:12px;">
          <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:10px">
            <div style="background:var(--resistance-pale);border-radius:8px;padding:6px 8px;flex-shrink:0;font-size:16px">âš‘</div>
            <div style="flex:1">
              <div style="font-size:12px;font-weight:600;color:var(--resistance);margin-bottom:3px" id="attention-flag-label-2">Resistance Flagged</div>
              <div style="font-size:14px;font-weight:500;color:var(--soil);line-height:1.3">Write personal financial vision</div>
              <div style="display:flex;align-items:center;gap:6px;margin-top:6px">
                <span id="attention-tag-2"><div class="sab-tag">Pleaser</div></span>
                <div style="font-size:11px;color:var(--text-light)">Flagged yesterday</div>
              </div>
            </div>
          </div>
          <div style="background:var(--morning);border-radius:10px;padding:10px 12px;margin-bottom:12px;border-left:3px solid var(--resistance)">
            <div style="font-size:10px;font-weight:600;color:var(--resistance);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Sarah noted</div>
            <div style="font-size:12px;color:var(--text-mid);line-height:1.5;font-style:italic">"Every time I sat down to write it, I started thinking about what my husband would think rather than what I actually want."</div>
          </div>
          <div class="sage-attention-lens" id="sage-lens-2">
            <div style="display:flex;align-items:center;gap:6px;margin-bottom:5px">
              <span style="font-size:11px;color:var(--sage)">âœ¦</span>
              <span style="font-size:10px;font-weight:700;color:var(--sage);text-transform:uppercase;letter-spacing:0.6px">Sage Coaching Angle</span>
            </div>
            <div style="font-size:12px;color:var(--text-mid);line-height:1.6">
              <strong style="color:var(--sage)">ğŸ’› Empathize</strong> â€” before pushing her toward the vision, meet her where she is. <em>"What does it feel like when you imagine writing what you want without anyone else's voice in the room?"</em> Validation first, then Navigate toward her own compass.
            </div>
          </div>
          <button class="btn btn-sm agenda-btn" id="agenda-btn-2" onclick="addToAgenda(this,'Write personal financial vision')" style="background:var(--accent-pale);color:var(--accent);border:1.5px solid rgba(196,123,63,0.3);font-size:12px">+ Add to Session Agenda</button>
        </div>

        <!-- Item 3 â€” Overdue -->
        <div style="background:var(--white);border:1.5px solid rgba(184,148,58,0.3);border-radius:16px;padding:16px;margin-bottom:20px;">
          <div style="display:flex;align-items:flex-start;gap:10px;margin-bottom:10px">
            <div style="background:var(--pending-pale);border-radius:8px;padding:6px 8px;flex-shrink:0;font-size:16px">â°</div>
            <div style="flex:1">
              <div style="font-size:12px;font-weight:600;color:var(--pending);margin-bottom:3px">Overdue â€” No Check-In</div>
              <div style="font-size:14px;font-weight:500;color:var(--soil);line-height:1.3">Review Q1 budget spreadsheet</div>
              <div style="display:flex;align-items:center;gap:6px;margin-top:6px">
                <div style="font-size:11px;color:var(--pending);background:var(--pending-pale);padding:2px 8px;border-radius:10px;font-weight:500">2 days overdue</div>
                <div style="font-size:11px;color:var(--text-light)">Was due Feb 19</div>
              </div>
            </div>
          </div>
          <div style="background:var(--morning);border-radius:10px;padding:10px 12px;margin-bottom:12px;font-size:12px;color:var(--text-light);font-style:italic">
            No check-in or note left by client.
          </div>
          <div class="sage-attention-lens" id="sage-lens-3">
            <div style="display:flex;align-items:center;gap:6px;margin-bottom:5px">
              <span style="font-size:11px;color:var(--sage)">âœ¦</span>
              <span style="font-size:10px;font-weight:700;color:var(--sage);text-transform:uppercase;letter-spacing:0.6px">Sage Coaching Angle</span>
            </div>
            <div style="font-size:12px;color:var(--text-mid);line-height:1.6">
              <strong style="color:var(--sage)">ğŸ” Explore</strong> â€” no note means something quietly got in the way. Rather than addressing the overdue task, get curious: <em>"What was happening for you the week this was due?"</em> The silence is data â€” let her Sage surface what the saboteur was doing.
            </div>
          </div>
          <button class="btn btn-sm agenda-btn" id="agenda-btn-3" onclick="addToAgenda(this,'Review Q1 budget spreadsheet')" style="background:var(--accent-pale);color:var(--accent);border:1.5px solid rgba(196,123,63,0.3);font-size:12px">+ Add to Session Agenda</button>
        </div>

      </div>

      <!-- Session Agenda Summary â€” appears as items are added -->
      <div id="agenda-summary" style="display:none;margin:0 20px 16px">
        <div style="background:var(--soil);border-radius:14px;padding:16px">
          <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:15px;margin-bottom:12px">ğŸ“‹ Session Agenda</div>
          <div id="agenda-list" style="display:flex;flex-direction:column;gap:8px"></div>
          <div style="color:var(--sand);font-size:11px;opacity:0.4;margin-top:12px;line-height:1.4">These items will be highlighted at the top of Sarah's client detail view when you open her session.</div>
        </div>
      </div>

      <div style="padding:0 20px 30px;display:flex;flex-direction:column;gap:10px">
        <button class="btn btn-primary" onclick="show('screen-client-detail')">Go to Full Profile â†’</button>
        <button class="btn btn-secondary" onclick="show('screen-dashboard')">Back to Dashboard</button>
      </div>

    </div>
  </div>

      <!-- â”€â”€ SCREEN 12: INSIGHTS â”€â”€ -->
  <div class="screen" id="screen-insights">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <div class="header-row">
        <div class="logo-text">Ground<span>work</span></div>
        <div class="mode-indicator"></div>
      </div>
      <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:20px;margin-top:8px">Coach Insights</div>
      <div style="color:rgba(234,217,192,0.55);font-size:12px;line-height:1.6;margin-top:6px">A snapshot of your coaching practice â€” completion trends, resistance patterns, and which clients need your attention. Use the time filter to zoom in or out.</div>
      <div style="display:flex;gap:6px;margin-top:14px;flex-wrap:wrap">
        <button class="time-filter active" onclick="setTimeFilter(this)">Week</button>
        <button class="time-filter" onclick="setTimeFilter(this)">Month</button>
        <button class="time-filter" onclick="setTimeFilter(this)">Quarter</button>
        <button class="time-filter" onclick="setTimeFilter(this)">Year</button>
        <button class="time-filter" onclick="setTimeFilter(this)">All Time</button>
      </div>
    </div>
    <div class="scroll">
      <div style="padding:16px 20px 0">
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:12px">Practice Health</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:4px">
          <div class="insight-stat-card"><div class="isc-num">8</div><div class="isc-lbl">Active Clients</div></div>
          <div class="insight-stat-card"><div class="isc-num" style="color:var(--complete)">71%</div><div class="isc-lbl">Avg Completion</div><div class="isc-trend up">â†‘ 6% vs last month</div></div>
          <div class="insight-stat-card"><div class="isc-num">47</div><div class="isc-lbl">Commitments Set</div></div>
          <div class="insight-stat-card"><div class="isc-num" style="color:var(--resistance)">12</div><div class="isc-lbl">Resistance Flags</div><div class="isc-trend down">â†“ 3 vs last month</div></div>
        </div>
      </div>
      <div style="padding:16px 20px 0">
        <div style="background:var(--white);border:1px solid var(--border);border-radius:16px;padding:16px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
            <div style="font-family:'Playfair Display',serif;font-size:14px;color:var(--soil)">Weekly Completion</div>
            <div style="font-size:11px;color:var(--text-light)">Last 6 weeks</div>
          </div>
          <div style="display:flex;align-items:flex-end;gap:8px;height:64px">
            <div class="bar-col"><div class="bar-fill" style="height:52%;background:var(--clay-light)"></div><div class="bar-lbl">W1</div></div>
            <div class="bar-col"><div class="bar-fill" style="height:61%;background:var(--clay-light)"></div><div class="bar-lbl">W2</div></div>
            <div class="bar-col"><div class="bar-fill" style="height:58%;background:var(--clay-light)"></div><div class="bar-lbl">W3</div></div>
            <div class="bar-col"><div class="bar-fill" style="height:67%;background:var(--clay)"></div><div class="bar-lbl">W4</div></div>
            <div class="bar-col"><div class="bar-fill" style="height:74%;background:var(--accent)"></div><div class="bar-lbl">W5</div></div>
            <div class="bar-col"><div class="bar-fill" style="height:71%;background:var(--accent)"></div><div class="bar-lbl">W6</div></div>
          </div>
        </div>
      </div>
      <div id="insights-general-section" style="padding:16px 20px 0;display:none">
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:12px">Resistance Patterns</div>
        <div style="background:var(--white);border:1px solid var(--border);border-radius:16px;padding:16px">
          <div style="font-size:11px;color:var(--text-light);margin-bottom:14px">Across all clients this month</div>
          <div class="resist-bar-row"><div class="resist-bar-label">Avoidance</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">9</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Fear</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:60%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Overwhelm</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:43%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">5</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Doubt</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:26%;background:rgba(184,92,92,0.35)"></div></div><div class="resist-bar-count">3</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Resentment</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:17%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">2</div></div>
          <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Life Happened</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:9%;background:rgba(184,92,92,0.15)"></div></div><div class="resist-bar-count">1</div></div>
          <div style="margin-top:14px;padding:10px 12px;background:var(--morning);border-radius:10px;font-size:12px;color:var(--text-mid);line-height:1.5;border-left:3px solid var(--clay)"><strong>Coaching note:</strong> Avoidance and Fear dominate this month. Consider whether your clients need more support breaking commitments into smaller steps.</div>
        </div>
      </div>
      <div id="insights-pq-section" style="padding:16px 20px 0">
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:12px">Saboteur Patterns</div>
        <div style="background:var(--white);border:1px solid var(--border);border-radius:16px;padding:16px">
          <div style="font-size:11px;color:var(--text-light);margin-bottom:14px">Across all clients this month</div>
          <div class="resist-bar-row"><div class="resist-bar-label">Judge</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:85%;background:var(--resistance)"></div></div><div class="resist-bar-count">10</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Avoider</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:68%;background:var(--resistance)"></div></div><div class="resist-bar-count">8</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Controller</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:51%;background:rgba(184,92,92,0.6)"></div></div><div class="resist-bar-count">6</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Pleaser</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:43%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">5</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Hyper-Achiever</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:34%;background:rgba(184,92,92,0.4)"></div></div><div class="resist-bar-count">4</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Stickler</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:26%;background:rgba(184,92,92,0.3)"></div></div><div class="resist-bar-count">3</div></div>
          <div class="resist-bar-row"><div class="resist-bar-label">Victim</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:17%;background:rgba(184,92,92,0.2)"></div></div><div class="resist-bar-count">2</div></div>
          <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Restless</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:9%;background:rgba(184,92,92,0.15)"></div></div><div class="resist-bar-count">1</div></div>
          <div style="margin-top:14px;padding:10px 12px;background:var(--sage-pale);border-radius:10px;font-size:12px;color:var(--text-mid);line-height:1.5;border-left:3px solid var(--sage)"><strong style="color:var(--sage)">âœ¦ PQ Coaching note:</strong> Judge and Avoider are dominating your client base this month. Your clients may benefit from PQ Reps focused on self-compassion and activating the Explore Sage power.</div>
        </div>
        <div style="margin-top:14px;background:var(--white);border:1px solid var(--border);border-radius:16px;padding:16px">
          <div style="font-family:'Playfair Display',serif;font-size:14px;color:var(--soil);margin-bottom:4px">Saboteur Map</div>
          <div style="font-size:11px;color:var(--text-light);margin-bottom:14px">Frequency across your entire client base</div>
          <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px">
            <div class="sab-map-cell high"><div class="smc-name">Judge</div><div class="smc-count">10</div></div>
            <div class="sab-map-cell high"><div class="smc-name">Avoider</div><div class="smc-count">8</div></div>
            <div class="sab-map-cell mid"><div class="smc-name">Controller</div><div class="smc-count">6</div></div>
            <div class="sab-map-cell mid"><div class="smc-name">Pleaser</div><div class="smc-count">5</div></div>
            <div class="sab-map-cell mid"><div class="smc-name">H-Achiever</div><div class="smc-count">4</div></div>
            <div class="sab-map-cell low"><div class="smc-name">Stickler</div><div class="smc-count">3</div></div>
            <div class="sab-map-cell low"><div class="smc-name">Victim</div><div class="smc-count">2</div></div>
            <div class="sab-map-cell low"><div class="smc-name">Restless</div><div class="smc-count">1</div></div>
            <div class="sab-map-cell none"><div class="smc-name">H-Rational</div><div class="smc-count">0</div></div>
            <div class="sab-map-cell none"><div class="smc-name">H-Vigilant</div><div class="smc-count">0</div></div>
          </div>
          <div style="display:flex;gap:12px;margin-top:10px;justify-content:center">
            <div style="display:flex;align-items:center;gap:4px;font-size:10px;color:var(--text-light)"><div style="width:10px;height:10px;border-radius:3px;background:var(--resistance)"></div>High</div>
            <div style="display:flex;align-items:center;gap:4px;font-size:10px;color:var(--text-light)"><div style="width:10px;height:10px;border-radius:3px;background:rgba(184,92,92,0.4)"></div>Mid</div>
            <div style="display:flex;align-items:center;gap:4px;font-size:10px;color:var(--text-light)"><div style="width:10px;height:10px;border-radius:3px;background:rgba(184,92,92,0.15)"></div>Low</div>
            <div style="display:flex;align-items:center;gap:4px;font-size:10px;color:var(--text-light)"><div style="width:10px;height:10px;border-radius:3px;background:var(--border)"></div>None</div>
          </div>
        </div>
      </div>
      <div style="padding:16px 20px 24px">
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:12px">Client Spotlight</div>
        <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:8px;display:flex;align-items:center;gap:12px;cursor:pointer" onclick="show('screen-attention')">
          <div class="client-av" style="background:#B8943A;width:38px;height:38px;font-size:13px">SK</div>
          <div style="flex:1"><div style="font-size:14px;font-weight:500;color:var(--soil)">Sarah Kennedy</div><div style="font-size:11px;color:var(--text-light);margin-top:2px">3 consecutive resistance flags Â· 1 overdue</div></div>
          <div class="badge badge-alert">Attention</div>
        </div>
        <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:8px;display:flex;align-items:center;gap:12px;cursor:pointer" onclick="show('screen-client-detail')">
          <div class="client-av" style="background:#4A7B9D;width:38px;height:38px;font-size:13px">DP</div>
          <div style="flex:1"><div style="font-size:14px;font-weight:500;color:var(--soil)">David Park</div><div style="font-size:11px;color:var(--text-light);margin-top:2px">75% completion Â· No resistance this month</div></div>
          <div class="badge badge-good">Thriving</div>
        </div>
        <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;display:flex;align-items:center;gap:12px;cursor:pointer" onclick="show('screen-client-detail')">
          <div class="client-av" style="background:#6B8F6E;width:38px;height:38px;font-size:13px">MK</div>
          <div style="flex:1"><div style="font-size:14px;font-weight:500;color:var(--soil)">Marcus Kim</div><div style="font-size:11px;color:var(--text-light);margin-top:2px">50% completion Â· Session today 10:30 AM</div></div>
          <div class="badge badge-today">Today</div>
        </div>
      </div>
    </div>
    <div class="bottom-nav">
      <button class="nav-btn" onclick="show('screen-dashboard')"><span class="nav-icon">âŒ‚</span><span class="nav-lbl">Home</span></button>
      <button class="nav-btn" onclick="show('screen-dashboard')"><span class="nav-icon">â—</span><span class="nav-lbl">Clients</span></button>
      <button class="nav-btn active"><span class="nav-icon">â—ˆ</span><span class="nav-lbl">Insights</span></button>
      <button class="nav-btn" onclick="show('screen-settings')"><span class="nav-icon">â—‡</span><span class="nav-lbl">Settings</span></button>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 13: CLIENT HISTORY â”€â”€ -->
  <div class="screen" id="screen-history">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="client-screen-header">
      <div class="logo-text">Ground<span>work</span></div>
      <div class="client-name-header">Marcus Kim</div>
      <div class="client-coach-tag">Coach: Jordan Rivera Â· <span class="client-session-mode">PQ Coaching</span></div>
      <div style="display:flex;gap:6px;margin-top:12px;flex-wrap:wrap">
        <button class="time-filter active" onclick="setHistoryPeriod(this,'client')">Last 30 Days</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'client')">Last 90 Days</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'client')">Last 6 Months</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'client')">Last Year</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'client')">All Time</button>
      </div>
    </div>
    <div class="scroll">
      <div style="padding:16px 20px 0">
        <div id="client-history-stats">
          <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:16px">
            <div class="insight-stat-card" style="text-align:center"><div class="isc-num" style="color:var(--complete)">67%</div><div class="isc-lbl">Completion</div></div>
            <div class="insight-stat-card" style="text-align:center"><div class="isc-num">18</div><div class="isc-lbl">Kept</div></div>
            <div class="insight-stat-card" style="text-align:center"><div class="isc-num" style="color:var(--resistance)">9</div><div class="isc-lbl">Resisted</div></div>
          </div>
        </div>
        <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:16px">
          <div style="font-size:13px;font-weight:500;color:var(--soil);margin-bottom:10px" id="history-resist-title">My Saboteur Patterns</div>
          <div id="history-resist-bars">
            <div class="resist-bar-row"><div class="resist-bar-label">Controller</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
            <div class="resist-bar-row"><div class="resist-bar-label">Judge</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:33%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">3</div></div>
            <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Avoider</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:11%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">1</div></div>
          </div>
          <div id="history-resist-insight" style="margin-top:12px;padding:10px 12px;background:var(--sage-pale);border-radius:10px;font-size:12px;color:var(--text-mid);line-height:1.5;border-left:3px solid var(--sage)">
            <strong style="color:var(--sage)">&#10022; Pattern:</strong> Your Controller shows up most when commitments involve uncertainty or others' input. A consistent theme worth exploring with your coach.
          </div>
        </div>

        <div class="sage-power-tracking" id="client-sage-tracking">
          <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:16px">
            <div style="display:flex;align-items:center;gap:6px;margin-bottom:12px">
              <span style="color:var(--sage);font-size:13px">âœ¦</span>
              <div style="font-size:13px;font-weight:500;color:var(--soil)">Your Sage Powers</div>
            </div>
            <div style="font-size:11px;color:var(--text-light);margin-bottom:12px;line-height:1.5">How often each Sage power has shown up in your check-ins this period.</div>
            <div style="display:flex;flex-direction:column;gap:7px">
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:var(--sage)">ğŸ’¡ Innovate</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:82%;background:var(--sage)"></div></div><div class="resist-bar-count" style="color:var(--sage)">9</div></div>
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:var(--sage)">âš¡ Activate</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:64%;background:rgba(107,143,110,0.7)"></div></div><div class="resist-bar-count" style="color:var(--sage)">7</div></div>
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:var(--sage)">ğŸ” Explore</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:45%;background:rgba(107,143,110,0.5)"></div></div><div class="resist-bar-count" style="color:var(--sage)">5</div></div>
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:rgba(107,143,110,0.5)">ğŸ§­ Navigate</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:18%;background:rgba(107,143,110,0.25)"></div></div><div class="resist-bar-count" style="color:rgba(107,143,110,0.5)">2</div></div>
              <div class="resist-bar-row" style="border:none"><div class="resist-bar-label" style="color:rgba(107,143,110,0.4)">ğŸ’› Empathize</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:9%;background:rgba(107,143,110,0.15)"></div></div><div class="resist-bar-count" style="color:rgba(107,143,110,0.4)">1</div></div>
            </div>
            <div style="margin-top:12px;padding:10px 12px;background:var(--sage-pale);border-radius:10px;font-size:12px;color:var(--text-mid);line-height:1.5;border-left:3px solid var(--sage)">
              <strong style="color:var(--sage)">âœ¦ Notice:</strong> Innovate and Activate are your go-to powers â€” great for getting unstuck. Empathize and Navigate are underused. Your coach may explore these with you.
            </div>
          </div>
        </div>
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:12px" id="client-cycles-title">Past Cycles <span style="font-size:11px;color:var(--text-light);font-family:'DM Sans',sans-serif">â€” Last 30 days</span></div>
        <div id="client-cycles-list">
          <div class="history-cycle-card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
              <div style="font-size:13px;font-weight:500;color:var(--soil)">Feb 7 â€“ Feb 20</div>
              <div style="font-size:11px;font-weight:500;color:var(--complete);background:var(--complete-pale);padding:3px 8px;border-radius:10px">3 of 4 complete</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:5px">
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Morning journaling 3x</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Call mentor</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">30 min daily walk</div></div>
              <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Draft business plan outline</div><span id="history-tag-1"><div class="sab-tag">Controller</div></span></div>
            </div>
          </div>
          <div class="history-cycle-card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
              <div style="font-size:13px;font-weight:500;color:var(--soil)">Jan 24 â€“ Feb 6</div>
              <div style="font-size:11px;font-weight:500;color:var(--pending);background:var(--pending-pale);padding:3px 8px;border-radius:10px">2 of 4 complete</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:5px">
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Research 3 business models</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Read chapter 2 of Deep Work</div></div>
              <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Schedule accountability call</div><span id="history-tag-2"><div class="sab-tag">Controller</div></span></div>
              <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Share business idea with 2 friends</div><span id="history-tag-3"><div class="sab-tag">Controller</div></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="bottom-nav">
      <button class="nav-btn" onclick="show('screen-client')"><span class="nav-icon">âŒ‚</span><span class="nav-lbl">Home</span></button>
      <button class="nav-btn active"><span class="nav-icon">â—</span><span class="nav-lbl">History</span></button>
      <button class="nav-btn" onclick="show('screen-settings-client')"><span class="nav-icon">â—‡</span><span class="nav-lbl">Settings</span></button>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 14: COACH VIEW OF CLIENT HISTORY â”€â”€ -->
  <div class="screen" id="screen-coach-history">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header" style="padding-bottom:20px">
      <button class="back-btn" onclick="show('screen-client-detail')">â†</button>
      <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:20px;margin-bottom:14px">Client History</div>

      <!-- Client selector row -->
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:14px">
        <div id="ch-avatar" class="client-av" style="background:#6B8F6E;width:44px;height:44px;font-size:15px;flex-shrink:0">MK</div>
        <div style="flex:1;min-width:0">
          <div style="color:var(--sand);font-family:'Playfair Display',serif;font-size:17px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis" id="ch-name">Marcus Kim</div>
          <div style="color:var(--sand);font-size:11px;opacity:0.5;margin-top:2px"><span class="client-session-mode">PQ Coaching</span> Â· <span id="ch-since">Client since Jan 2025</span></div>
        </div>
        <!-- Switch client button -->
        <button id="ch-switch-btn" onclick="toggleClientSwitcher()" style="background:rgba(255,255,255,0.12);border:1px solid rgba(255,255,255,0.2);border-radius:20px;padding:6px 12px;color:var(--sand);font-size:11px;font-family:'DM Sans',sans-serif;cursor:pointer;white-space:nowrap;flex-shrink:0">
          Switch âŒ„
        </button>
      </div>

      <!-- Client switcher dropdown -->
      <div id="client-switcher" style="display:none;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.15);border-radius:14px;padding:6px;margin-bottom:14px">
        <div style="font-size:10px;color:rgba(234,217,192,0.4);text-transform:uppercase;letter-spacing:0.8px;padding:6px 10px 4px">Switch to client</div>
        <div class="ch-client-row active" onclick="switchHistoryClient('Marcus Kim','MK','#6B8F6E','Jan 2025','Marcus avoided sharing his business idea â€” Controller pattern. Strong theme around vulnerability.')">
          <div class="client-av" style="background:#6B8F6E;width:32px;height:32px;font-size:11px">MK</div>
          <div style="flex:1"><div style="font-size:13px;color:var(--sand);font-weight:500">Marcus Kim</div><div style="font-size:10px;color:rgba(234,217,192,0.45);margin-top:1px">50% Â· Session today</div></div>
          <div style="font-size:10px;color:var(--sage)">âœ“ Viewing</div>
        </div>
        <div class="ch-client-row" onclick="switchHistoryClient('Sarah Kennedy','SK','#B8943A','Mar 2024','Sarah flagged Pleaser for third consecutive cycle. Avoids financial self-advocacy consistently.')">
          <div class="client-av" style="background:#B8943A;width:32px;height:32px;font-size:11px">SK</div>
          <div style="flex:1"><div style="font-size:13px;color:var(--sand);font-weight:500">Sarah Kennedy</div><div style="font-size:10px;color:rgba(234,217,192,0.45);margin-top:1px">58% Â· Session Mon</div></div>
          <div class="badge badge-alert" style="font-size:9px;padding:2px 6px">Attention</div>
        </div>
        <div class="ch-client-row" onclick="switchHistoryClient('David Park','DP','#4A7B9D','Jun 2024','David is thriving â€” highest completion rate in cohort. No resistance flags this period.')">
          <div class="client-av" style="background:#4A7B9D;width:32px;height:32px;font-size:11px">DP</div>
          <div style="flex:1"><div style="font-size:13px;color:var(--sand);font-weight:500">David Park</div><div style="font-size:10px;color:rgba(234,217,192,0.45);margin-top:1px">75% Â· Session Thu</div></div>
          <div class="badge badge-good" style="font-size:9px;padding:2px 6px">Thriving</div>
        </div>
        <div class="ch-client-row" onclick="switchHistoryClient('Priya Nair','PN','#8B6FAE','Sep 2024','Priya is new â€” only 2 cycles completed. Hyper-Achiever emerging as dominant saboteur.')">
          <div class="client-av" style="background:#8B6FAE;width:32px;height:32px;font-size:11px">PN</div>
          <div style="flex:1"><div style="font-size:13px;color:var(--sand);font-weight:500">Priya Nair</div><div style="font-size:10px;color:rgba(234,217,192,0.45);margin-top:1px">71% Â· Session Fri</div></div>
          <div class="badge badge-today" style="font-size:9px;padding:2px 6px">On Track</div>
        </div>
      </div>

      <!-- Period filter -->
      <div style="display:flex;gap:6px;flex-wrap:wrap">
        <button class="time-filter active" onclick="setHistoryPeriod(this,'coach')">Last 30 Days</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'coach')">Last 90 Days</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'coach')">Last 6 Months</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'coach')">Last Year</button>
        <button class="time-filter" onclick="setHistoryPeriod(this,'coach')">All Time</button>
      </div>
    </div>
    <div class="scroll">
      <div style="padding:16px 20px 0">

        <!-- Coach stats row â€” richer than client view -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px" id="coach-history-stats">
          <div class="insight-stat-card"><div class="isc-num" style="color:var(--complete)">67%</div><div class="isc-lbl">Completion rate</div></div>
          <div class="insight-stat-card"><div class="isc-num">18</div><div class="isc-lbl">Commitments kept</div></div>
          <div class="insight-stat-card"><div class="isc-num" style="color:var(--resistance)">9</div><div class="isc-lbl">Resistance flags</div></div>
          <div class="insight-stat-card"><div class="isc-num">7</div><div class="isc-lbl">Sessions completed</div></div>
        </div>

        <!-- Coach pattern analysis -->
        <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:16px">
          <div style="font-size:13px;font-weight:500;color:var(--soil);margin-bottom:10px" id="coach-history-resist-title">Saboteur Analysis</div>
          <div id="coach-history-resist-bars">
            <div class="resist-bar-row"><div class="resist-bar-label">Controller</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
            <div class="resist-bar-row"><div class="resist-bar-label">Judge</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:33%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">3</div></div>
            <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Avoider</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:11%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">1</div></div>
          </div>
          <div id="coach-history-insight" style="margin-top:12px;padding:10px 12px;background:var(--sage-pale);border-radius:10px;font-size:12px;color:var(--text-mid);line-height:1.5;border-left:3px solid var(--sage)">
            <strong style="color:var(--sage)">&#10022; Coach note:</strong> Controller dominates across all periods. Marcus consistently resists when outcomes depend on others or are uncertain. The pattern strengthened after the business plan commitment was introduced in Week 3.
          </div>
        </div>

        <!-- Past cycles â€” coach view includes session notes -->

        <div class="sage-power-tracking" id="coach-sage-tracking">
          <div style="background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:16px">
            <div style="display:flex;align-items:center;gap:6px;margin-bottom:12px">
              <span style="color:var(--sage);font-size:13px">âœ¦</span>
              <div style="font-size:13px;font-weight:500;color:var(--soil)" id="coach-sage-title">Sage Power Usage</div>
            </div>
            <div style="font-size:11px;color:var(--text-light);margin-bottom:12px;line-height:1.5" id="coach-sage-subtitle">Which Sage powers Marcus has drawn on in his check-ins this period.</div>
            <div style="display:flex;flex-direction:column;gap:7px" id="coach-sage-bars">
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:var(--sage)">ğŸ’¡ Innovate</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:82%;background:var(--sage)"></div></div><div class="resist-bar-count" style="color:var(--sage)">9</div></div>
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:var(--sage)">âš¡ Activate</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:64%;background:rgba(107,143,110,0.7)"></div></div><div class="resist-bar-count" style="color:var(--sage)">7</div></div>
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:var(--sage)">ğŸ” Explore</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:45%;background:rgba(107,143,110,0.5)"></div></div><div class="resist-bar-count" style="color:var(--sage)">5</div></div>
              <div class="resist-bar-row"><div class="resist-bar-label" style="color:rgba(107,143,110,0.5)">ğŸ§­ Navigate</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:18%;background:rgba(107,143,110,0.25)"></div></div><div class="resist-bar-count" style="color:rgba(107,143,110,0.5)">2</div></div>
              <div class="resist-bar-row" style="border:none"><div class="resist-bar-label" style="color:rgba(107,143,110,0.4)">ğŸ’› Empathize</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:9%;background:rgba(107,143,110,0.15)"></div></div><div class="resist-bar-count" style="color:rgba(107,143,110,0.4)">1</div></div>
            </div>
            <div style="margin-top:12px;padding:10px 12px;background:var(--sage-pale);border-radius:10px;font-size:12px;color:var(--text-mid);line-height:1.5;border-left:3px solid var(--sage)" id="coach-sage-insight">
              <strong style="color:var(--sage)">âœ¦ Coaching note:</strong> Marcus reaches for Innovate and Activate readily â€” he's action-oriented. Empathize and Navigate are barely used. Consider whether he's bypassing self-compassion and values-alignment to get to action too quickly.
            </div>
          </div>
        </div>
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:12px" id="coach-cycles-title">Session History <span style="font-size:11px;color:var(--text-light);font-family:'DM Sans',sans-serif">â€” Last 30 days</span></div>

        <div id="coach-cycles-list">
          <div class="history-cycle-card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px">
              <div style="font-size:13px;font-weight:500;color:var(--soil)">Session 7 Â· Feb 7 â€“ Feb 20</div>
              <div style="font-size:11px;font-weight:500;color:var(--complete);background:var(--complete-pale);padding:3px 8px;border-radius:10px">3 of 4</div>
            </div>
            <div style="font-size:11px;color:var(--text-light);margin-bottom:10px">Session date: Feb 7</div>
            <div style="display:flex;flex-direction:column;gap:5px;margin-bottom:10px">
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Morning journaling 3x</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Call mentor</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">30 min daily walk</div></div>
              <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Draft business plan outline</div><div class="sab-tag">Controller</div></div>
            </div>
            <!-- Private session note â€” coach only -->
            <div style="background:var(--morning);border-radius:10px;padding:10px 12px;border-left:3px solid var(--accent)">
              <div style="font-size:10px;font-weight:600;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">ğŸ”’ Private Session Note</div>
              <div style="font-size:12px;color:var(--text-mid);line-height:1.5"><span class="note-preview">Controller showing up strongly around the business plan. Explored the fear underneath â€” Marcus admitted he is worried the plan will expose gaps in his thinking. Assigned 'imperfect first draft' reframe for next session.</span></div>
            </div>
          </div>

          <div class="history-cycle-card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px">
              <div style="font-size:13px;font-weight:500;color:var(--soil)">Session 6 Â· Jan 24 â€“ Feb 6</div>
              <div style="font-size:11px;font-weight:500;color:var(--pending);background:var(--pending-pale);padding:3px 8px;border-radius:10px">2 of 4</div>
            </div>
            <div style="font-size:11px;color:var(--text-light);margin-bottom:10px">Session date: Jan 24</div>
            <div style="display:flex;flex-direction:column;gap:5px;margin-bottom:10px">
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Research 3 business models</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Read chapter 2 of Deep Work</div></div>
              <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Schedule accountability call</div><div class="sab-tag">Controller</div></div>
              <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Share idea with 2 friends</div><div class="sab-tag">Controller</div></div>
            </div>
            <div style="background:var(--morning);border-radius:10px;padding:10px 12px;border-left:3px solid var(--accent)">
              <div style="font-size:10px;font-weight:600;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">ğŸ”’ Private Session Note</div>
              <div style="font-size:12px;color:var(--text-mid);line-height:1.5">Marcus avoided both social commitments. Strong Controller pattern â€” needs control over how he is perceived. Will introduce vulnerability as strength reframe next session.</div>
            </div>
          </div>

          <div class="history-cycle-card" style="margin-bottom:24px">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px">
              <div style="font-size:13px;font-weight:500;color:var(--soil)">Session 5 Â· Jan 10 â€“ Jan 23</div>
              <div style="font-size:11px;font-weight:500;color:var(--complete);background:var(--complete-pale);padding:3px 8px;border-radius:10px">4 of 4</div>
            </div>
            <div style="font-size:11px;color:var(--text-light);margin-bottom:10px">Session date: Jan 10</div>
            <div style="display:flex;flex-direction:column;gap:5px;margin-bottom:10px">
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Set up home office space</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Complete LinkedIn profile</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Identify top 3 career goals</div></div>
              <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Journal daily for 1 week</div></div>
            </div>
            <div style="background:var(--morning);border-radius:10px;padding:10px 12px;border-left:3px solid var(--accent)">
              <div style="font-size:10px;font-weight:600;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">ğŸ”’ Private Session Note</div>
              <div style="font-size:12px;color:var(--text-mid);line-height:1.5">Strong first full cycle. Marcus is motivated and self-aware. No saboteur resistance this period â€” commitments were within his comfort zone. Need to introduce stretch goals next session.</div>
            </div>
            <div style="margin-top:8px;font-size:11px;color:var(--complete);font-style:italic">ğŸ‰ Perfect cycle!</div>
          </div>
        </div>

      </div>
    </div>
    <div class="bottom-nav">
      <button class="nav-btn" onclick="show('screen-dashboard')"><span class="nav-icon">âŒ‚</span><span class="nav-lbl">Home</span></button>
      <button class="nav-btn" onclick="show('screen-client-detail')"><span class="nav-icon">â—</span><span class="nav-lbl">Profile</span></button>
      <button class="nav-btn active"><span class="nav-icon">ğŸ“‹</span><span class="nav-lbl">History</span></button>
      <button class="nav-btn" onclick="show('screen-settings')"><span class="nav-icon">â—‡</span><span class="nav-lbl">Settings</span></button>
    </div>
  </div>


  <!-- â”€â”€ SCREEN 15: COACH ONBOARDING WALKTHROUGH â”€â”€ -->
  <div class="screen" id="screen-onboarding">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div style="background:var(--soil);min-height:100%;display:flex;flex-direction:column;padding:0 0 30px">

      <!-- Progress dots -->
      <div style="display:flex;justify-content:center;gap:8px;padding:28px 20px 0">
        <div class="onboard-dot active" id="odot-1"></div>
        <div class="onboard-dot" id="odot-2"></div>
        <div class="onboard-dot" id="odot-3"></div>
        <div class="onboard-dot" id="odot-4"></div>
      </div>

      <!-- Slide container -->
      <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 32px;text-align:center" id="onboard-slide">
        <div style="font-size:56px;margin-bottom:24px" id="onboard-icon">ğŸŒ±</div>
        <div style="font-family:'Playfair Display',serif;font-size:26px;color:var(--sand);line-height:1.25;margin-bottom:16px" id="onboard-title">Welcome to Groundwork</div>
        <div style="font-size:14px;color:rgba(234,217,192,0.65);line-height:1.7" id="onboard-body">Groundwork helps your clients follow through on the commitments they make in sessions â€” and helps you spot the patterns that get in their way.</div>
      </div>

      <!-- Nav buttons -->
      <div style="padding:0 24px">
        <button class="btn btn-primary" id="onboard-next-btn" onclick="onboardNext()" style="margin-bottom:12px">Next â†’</button>
        <button class="btn btn-ghost" id="onboard-skip-btn" onclick="show('screen-empty-state')" style="color:rgba(234,217,192,0.4);font-size:13px">Skip intro</button>
      </div>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 16: EMPTY STATE (new coach, no clients yet) â”€â”€ -->
  <div class="screen" id="screen-empty-state">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div class="app-header">
      <div class="header-row">
        <div class="logo-text">Ground<span>work</span></div>
        <div class="avatar-circle" onclick="show('screen-settings')">JR</div>
      </div>
      <div style="margin-top:4px">
        <div class="header-greeting">Good morning, Coach Jordan</div>
        <div class="mode-indicator"></div>
      </div>
    </div>
    <div class="scroll">
      <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 32px;text-align:center;min-height:420px">
        <div style="font-size:64px;margin-bottom:20px">ğŸŒ±</div>
        <div style="font-family:'Playfair Display',serif;font-size:22px;color:var(--soil);margin-bottom:12px;line-height:1.3">Your practice is ready.<br>Let's add your first client.</div>
        <div style="font-size:13px;color:var(--text-light);line-height:1.7;margin-bottom:32px;max-width:260px">Add a client and they'll receive an email invitation to join. You can set commitments after your first session together.</div>
        <button class="btn btn-primary" onclick="show('screen-add-client')" style="width:100%;max-width:260px;margin-bottom:12px">+ Add Your First Client</button>
        <button class="btn btn-ghost" style="font-size:13px;color:var(--clay)" onclick="show('screen-dashboard')">Explore the dashboard first</button>
      </div>

      <!-- What to expect section -->
      <div style="margin:0 20px 30px">
        <div style="font-family:'Playfair Display',serif;font-size:15px;color:var(--soil);margin-bottom:14px;text-align:center">How it works</div>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="display:flex;gap:14px;align-items:flex-start;background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px">
            <div style="font-size:22px;flex-shrink:0">ğŸ“‹</div>
            <div><div style="font-size:13px;font-weight:600;color:var(--soil);margin-bottom:3px">After each session</div><div style="font-size:12px;color:var(--text-light);line-height:1.5">Enter 1â€“5 commitments and they're delivered to your client automatically.</div></div>
          </div>
          <div style="display:flex;gap:14px;align-items:flex-start;background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px">
            <div style="font-size:22px;flex-shrink:0">âœ“</div>
            <div><div style="font-size:13px;font-weight:600;color:var(--soil);margin-bottom:3px">Between sessions</div><div style="font-size:12px;color:var(--text-light);line-height:1.5">Clients check in on commitments and flag resistance when it shows up.</div></div>
          </div>
          <div style="display:flex;gap:14px;align-items:flex-start;background:var(--white);border:1px solid var(--border);border-radius:14px;padding:14px">
            <div style="font-size:22px;flex-shrink:0">â—ˆ</div>
            <div><div style="font-size:13px;font-weight:600;color:var(--soil);margin-bottom:3px">Over time</div><div style="font-size:12px;color:var(--text-light);line-height:1.5">Groundwork surfaces patterns so you walk into every session already knowing what to focus on.</div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="bottom-nav">
      <button class="nav-btn active" onclick="show('screen-empty-state')"><span class="nav-icon">âŒ‚</span><span class="nav-lbl">Home</span></button>
      <button class="nav-btn" onclick="show('screen-empty-state')"><span class="nav-icon">â—</span><span class="nav-lbl">Clients</span></button>
      <button class="nav-btn" onclick="show('screen-insights')"><span class="nav-icon">â—ˆ</span><span class="nav-lbl">Insights</span></button>
      <button class="nav-btn" onclick="show('screen-settings')"><span class="nav-icon">â—‡</span><span class="nav-lbl">Settings</span></button>
    </div>
  </div>

  <!-- â”€â”€ SCREEN 17: CLIENT INVITE / ONBOARDING â”€â”€ -->
  <div class="screen" id="screen-client-invite">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div style="background:var(--soil);min-height:100%;display:flex;flex-direction:column">

      <!-- Header -->
      <div style="padding:40px 28px 28px;text-align:center">
        <div class="logo-text" style="font-size:22px;margin-bottom:6px">Ground<span>work</span></div>
        <div style="font-size:12px;color:rgba(234,217,192,0.4);letter-spacing:0.5px">Your coaching companion</div>
      </div>

      <!-- Invite card -->
      <div style="flex:1;background:var(--morning);border-radius:24px 24px 0 0;padding:28px 24px 40px">

        <!-- Coach info -->
        <div style="display:flex;align-items:center;gap:12px;background:var(--white);border-radius:16px;padding:14px;margin-bottom:24px;border:1px solid var(--border)">
          <div class="client-av" style="background:#6B8F6E;width:44px;height:44px;font-size:15px;flex-shrink:0">JR</div>
          <div>
            <div style="font-size:11px;color:var(--text-light);margin-bottom:2px">You've been invited by</div>
            <div style="font-size:15px;font-weight:600;color:var(--soil);font-family:'Playfair Display',serif">Jordan Rivera</div>
            <div style="font-size:11px;color:var(--text-light);margin-top:1px">Certified PQ Coach</div>
          </div>
        </div>

        <div style="font-family:'Playfair Display',serif;font-size:20px;color:var(--soil);margin-bottom:8px;line-height:1.3">Hi Marcus, welcome to Groundwork</div>
        <div style="font-size:13px;color:var(--text-mid);line-height:1.7;margin-bottom:24px">Your coach uses Groundwork to keep track of your commitments between sessions and help you notice patterns when resistance shows up.</div>

        <!-- What clients do â€” 3 simple steps -->
        <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:28px">
          <div style="display:flex;gap:12px;align-items:center">
            <div style="width:28px;height:28px;border-radius:50%;background:var(--soil);color:var(--sand);font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0">1</div>
            <div style="font-size:13px;color:var(--text-mid)">Your coach adds your session commitments here after each session</div>
          </div>
          <div style="display:flex;gap:12px;align-items:center">
            <div style="width:28px;height:28px;border-radius:50%;background:var(--soil);color:var(--sand);font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0">2</div>
            <div style="font-size:13px;color:var(--text-mid)">You check in as you work through them â€” marking done or flagging what got in the way</div>
          </div>
          <div style="display:flex;gap:12px;align-items:center">
            <div style="width:28px;height:28px;border-radius:50%;background:var(--soil);color:var(--sand);font-size:12px;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0">3</div>
            <div style="font-size:13px;color:var(--text-mid)">Your coach sees your progress before each session â€” so you hit the ground running</div>
          </div>
        </div>

        <!-- Create account form -->
        <div style="background:var(--white);border-radius:16px;padding:18px;border:1px solid var(--border);margin-bottom:16px">
          <div style="font-size:13px;font-weight:600;color:var(--soil);margin-bottom:14px">Create your account</div>
          <div class="input-group" style="margin-bottom:12px">
            <label class="input-label">Your name</label>
            <input class="input" type="text" value="Marcus Kim">
          </div>
          <div class="input-group" style="margin-bottom:12px">
            <label class="input-label">Email</label>
            <input class="input" type="email" value="marcus@email.com" style="color:var(--text-light)">
          </div>
          <div class="input-group" style="margin-bottom:0">
            <label class="input-label">Create a password</label>
            <input class="input" type="password" placeholder="At least 8 characters">
          </div>
        </div>

        <button class="btn btn-primary" onclick="show('screen-client')" style="margin-bottom:10px">Accept Invitation & Get Started â†’</button>
        <div style="font-size:11px;color:var(--text-light);text-align:center;line-height:1.5">By continuing you agree to Groundwork's Terms of Service and Privacy Policy</div>
      </div>
    </div>
  </div>


  <!-- â”€â”€ SCREEN 18: INVITE CONFIRMATION â”€â”€ -->
  <div class="screen" id="screen-invite-confirm">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div style="background:var(--soil);min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 32px;text-align:center">

      <!-- Animated checkmark -->
      <div style="width:72px;height:72px;border-radius:50%;background:rgba(90,138,94,0.2);border:2px solid var(--complete);display:flex;align-items:center;justify-content:center;margin-bottom:24px;animation:popIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275)">
        <div style="font-size:32px">âœ“</div>
      </div>

      <div style="font-family:'Playfair Display',serif;font-size:24px;color:var(--sand);margin-bottom:10px;line-height:1.3">Invitation sent!</div>
      <div style="font-size:13px;color:rgba(234,217,192,0.6);line-height:1.7;margin-bottom:8px">An email is on its way to</div>

      <!-- Client summary card -->
      <div style="background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.12);border-radius:16px;padding:16px 20px;margin-bottom:28px;width:100%">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="client-av" id="confirm-avatar" style="background:#9B8B7A;width:40px;height:40px;font-size:14px;flex-shrink:0">CL</div>
          <div style="text-align:left">
            <div style="color:var(--sand);font-size:15px;font-weight:500;font-family:'Playfair Display',serif" id="confirm-name">New Client</div>
            <div style="color:rgba(234,217,192,0.5);font-size:12px;margin-top:2px" id="confirm-email">client@email.com</div>
          </div>
          <div style="margin-left:auto">
            <span class="tag-pq" id="confirm-mode-tag">âœ¦ PQ</span>
          </div>
        </div>
      </div>

      <!-- What happens next -->
      <div style="background:rgba(255,255,255,0.05);border-radius:14px;padding:16px 18px;margin-bottom:32px;width:100%;text-align:left">
        <div style="font-size:11px;font-weight:600;color:rgba(234,217,192,0.4);text-transform:uppercase;letter-spacing:0.7px;margin-bottom:12px">What happens next</div>
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="color:var(--sage);font-size:13px;flex-shrink:0;margin-top:1px">1.</div>
            <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.5">Your client receives an email invitation with a link to create their account</div>
          </div>
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="color:var(--sage);font-size:13px;flex-shrink:0;margin-top:1px">2.</div>
            <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.5">Once they join, they'll appear on your dashboard and you can add commitments after your first session</div>
          </div>
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="color:var(--sage);font-size:13px;flex-shrink:0;margin-top:1px">3.</div>
            <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.5">The invitation link expires in 7 days â€” you can resend it from the client's profile if needed</div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <button class="btn btn-primary" onclick="show('screen-dashboard')" style="margin-bottom:10px;width:100%">Back to Dashboard</button>
      <button class="btn btn-ghost" onclick="show('screen-add-client')" style="color:rgba(234,217,192,0.5);font-size:13px;width:100%">+ Invite another client</button>

    </div>
  </div>

  <!-- â”€â”€ SCREEN 19: POST-SESSION SEND CONFIRMATION â”€â”€ -->
  <div class="screen" id="screen-session-confirm">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div style="background:var(--soil);min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 32px;text-align:center">

      <!-- Animated checkmark -->
      <div style="width:72px;height:72px;border-radius:50%;background:rgba(90,138,94,0.2);border:2px solid var(--complete);display:flex;align-items:center;justify-content:center;margin-bottom:24px;animation:popIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275)">
        <div style="font-size:32px">âœ“</div>
      </div>

      <div style="font-family:'Playfair Display',serif;font-size:24px;color:var(--sand);margin-bottom:10px">Session notes sent!</div>
      <div style="font-size:13px;color:rgba(234,217,192,0.6);line-height:1.7;margin-bottom:24px">Marcus has been notified and can<br>see his commitments right now.</div>

      <!-- Commitment summary -->
      <div style="background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.12);border-radius:16px;padding:16px 20px;margin-bottom:28px;width:100%;text-align:left">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
          <div class="client-av" style="background:#6B8F6E;width:34px;height:34px;font-size:12px;flex-shrink:0">MK</div>
          <div>
            <div style="color:var(--sand);font-size:14px;font-weight:500;font-family:'Playfair Display',serif">Marcus Kim</div>
            <div style="color:rgba(234,217,192,0.45);font-size:11px;margin-top:1px">Next session â€” Mon Feb 24</div>
          </div>
        </div>
        <div style="border-top:1px solid rgba(255,255,255,0.08);padding-top:12px;display:flex;flex-direction:column;gap:8px">
          <div style="display:flex;align-items:center;gap:8px">
            <div style="width:6px;height:6px;border-radius:50%;background:var(--accent);flex-shrink:0"></div>
            <div style="font-size:12px;color:rgba(234,217,192,0.7)">Write a 1-page business plan outline</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px">
            <div style="width:6px;height:6px;border-radius:50%;background:var(--accent);flex-shrink:0"></div>
            <div style="font-size:12px;color:rgba(234,217,192,0.7)">Daily 30 min walk â€” no phone</div>
          </div>
          <div style="display:flex;align-items:center;gap:8px">
            <div style="width:6px;height:6px;border-radius:50%;background:var(--accent);flex-shrink:0"></div>
            <div style="font-size:12px;color:rgba(234,217,192,0.7)">Morning journaling 3x this week</div>
          </div>
        </div>
        <div style="border-top:1px solid rgba(255,255,255,0.08);padding-top:10px;margin-top:10px">
          <div style="font-size:10px;color:rgba(234,217,192,0.3);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:4px">Session summary</div>
          <div style="font-size:12px;color:rgba(234,217,192,0.55);line-height:1.5;font-style:italic">"We explored how the Controller saboteur is showing up around the business plan..."</div>
        </div>
      </div>

      <!-- What happens next -->
      <div style="background:rgba(255,255,255,0.05);border-radius:14px;padding:14px 18px;margin-bottom:32px;width:100%;text-align:left">
        <div style="font-size:11px;font-weight:600;color:rgba(234,217,192,0.4);text-transform:uppercase;letter-spacing:0.7px;margin-bottom:10px">What happens next</div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="color:var(--sage);font-size:13px;flex-shrink:0">1.</div>
            <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.5">Marcus receives a notification and can view his commitments immediately</div>
          </div>
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="color:var(--sage);font-size:13px;flex-shrink:0">2.</div>
            <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.5">You'll be notified when he checks in or flags resistance</div>
          </div>
          <div style="display:flex;gap:10px;align-items:flex-start">
            <div style="color:var(--sage);font-size:13px;flex-shrink:0">3.</div>
            <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.5">His progress will appear on your dashboard in real time</div>
          </div>
        </div>
      </div>

      <button class="btn btn-primary" onclick="show('screen-dashboard')" style="margin-bottom:10px;width:100%">Back to Dashboard</button>
      <button class="btn btn-ghost" onclick="show('screen-client-detail')" style="color:rgba(234,217,192,0.5);font-size:13px;width:100%">View Marcus's profile â†’</button>

    </div>
  </div>


  <!-- â”€â”€ SCREEN 20: CHECK-IN CONFIRMATION (Client) â”€â”€ -->
  <div class="screen" id="screen-checkin-confirm">
    <div class="status-bar"><span>9:41</span><div class="status-icons"><span>â—â—â—</span></div></div>
    <div style="background:var(--soil);min-height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 32px;text-align:center">

      <!-- Animated checkmark -->
      <div style="width:72px;height:72px;border-radius:50%;background:rgba(90,138,94,0.2);border:2px solid var(--complete);display:flex;align-items:center;justify-content:center;margin-bottom:24px;animation:popIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275)">
        <div style="font-size:32px">âœ“</div>
      </div>

      <div style="font-family:'Playfair Display',serif;font-size:24px;color:var(--sand);margin-bottom:10px">Check-in sent!</div>
      <div style="font-size:13px;color:rgba(234,217,192,0.6);line-height:1.7;margin-bottom:24px">Jordan has been notified and will<br>review your progress before your next session.</div>

      <!-- Summary card -->
      <div style="background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.12);border-radius:16px;padding:16px 20px;margin-bottom:28px;width:100%;text-align:left">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:12px">
          <div class="client-av" style="background:#6B8F6E;width:34px;height:34px;font-size:12px;flex-shrink:0">JR</div>
          <div>
            <div style="color:var(--sand);font-size:14px;font-weight:500;font-family:'Playfair Display',serif">Jordan Rivera</div>
            <div style="color:rgba(234,217,192,0.45);font-size:11px;margin-top:1px">Your coach Â· Next session Mon Feb 24</div>
          </div>
        </div>
        <div style="border-top:1px solid rgba(255,255,255,0.08);padding-top:12px">
          <div style="font-size:10px;color:rgba(234,217,192,0.3);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:8px">You reported</div>
          <div style="display:flex;flex-direction:column;gap:7px">
            <div style="display:flex;align-items:center;gap:8px">
              <div style="font-size:13px;color:var(--complete)">âœ“</div>
              <div style="font-size:12px;color:rgba(234,217,192,0.7)">Morning journaling 3x</div>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <div style="font-size:13px;color:var(--complete)">âœ“</div>
              <div style="font-size:12px;color:rgba(234,217,192,0.7)">30 min daily walk</div>
            </div>
            <div style="display:flex;align-items:center;gap:8px">
              <div style="font-size:13px;color:var(--resistance)">âš‘</div>
              <div style="font-size:12px;color:rgba(234,217,192,0.7)">Draft business plan outline</div>
              <div id="checkin-confirm-sab-tag" class="sab-tag" style="margin-left:auto">Controller</div>
            </div>
          </div>
        </div>
        <div style="border-top:1px solid rgba(255,255,255,0.08);padding-top:10px;margin-top:10px">
          <div style="font-size:10px;color:rgba(234,217,192,0.3);text-transform:uppercase;letter-spacing:0.6px;margin-bottom:4px">Your reflection</div>
          <div style="font-size:12px;color:rgba(234,217,192,0.55);line-height:1.5;font-style:italic">"I actually started and got 3 paragraphs in before my inner critic took over..."</div>
        </div>
      </div>

      <!-- Encouragement note -->
      <div style="background:rgba(107,143,110,0.12);border:1px solid rgba(107,143,110,0.2);border-radius:14px;padding:14px 18px;margin-bottom:28px;width:100%;text-align:left" id="checkin-confirm-sage">
        <div style="font-size:11px;font-weight:600;color:var(--sage);margin-bottom:4px">âœ¦ That's progress</div>
        <div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.6">Starting imperfectly is still starting. Your coach will see this before your next session.</div>
      </div>

      <button class="btn btn-primary" onclick="show('screen-client')" style="margin-bottom:10px;width:100%">Back to My Commitments</button>

    </div>
  </div>

</div><!-- end phone-wrapper -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DEV SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="dev-sidebar">
  <div class="sidebar-section-label">Onboarding</div>
  <button class="dev-btn active" onclick="show('screen-splash')">â‘  Splash</button>
  <button class="dev-btn" onclick="show('screen-signup')">â‘¡ Sign Up</button>
  <button class="dev-btn" onclick="show('screen-onboarding')">â‘¢ Walkthrough</button>
  <button class="dev-btn" onclick="show('screen-empty-state')">â‘£ Empty State</button>

  <div class="sidebar-section-label">Coach Flow</div>
  <button class="dev-btn" onclick="show('screen-dashboard')">â‘¤ Dashboard</button>
  <button class="dev-btn" onclick="show('screen-add-client')">â‘¥ Add Client</button>
  <button class="dev-btn" onclick="show('screen-invite-confirm')">â‘¦ Invite Sent</button>
  <button class="dev-btn" onclick="show('screen-client-detail')">â‘§ Client Detail</button>
  <button class="dev-btn" onclick="show('screen-attention')">â‘¨ Attention</button>
  <button class="dev-btn" onclick="show('screen-post-session')">â‘© Post Session</button>
  <button class="dev-btn" onclick="show('screen-session-confirm')">â‘ª Session Sent</button>
  <button class="dev-btn" onclick="show('screen-insights')">â‘« Insights</button>
  <button class="dev-btn" onclick="show('screen-coach-history')">â‘¬ Client History</button>
  <button class="dev-btn" onclick="show('screen-settings')">â‘­ Coach Settings</button>

  <div class="sidebar-section-label">Client Flow</div>
  <button class="dev-btn" onclick="show('screen-client-invite')">â‘® Client Invite</button>
  <button class="dev-btn" onclick="show('screen-client')">â‘¯ Client View</button>
  <button class="dev-btn" onclick="show('screen-checkin')">â‘° Check-In</button>
  <button class="dev-btn" onclick="show('screen-checkin-confirm')">â‘± Check-In Sent</button>
  <button class="dev-btn" onclick="show('screen-history')">â‘² Client History</button>
  <button class="dev-btn" onclick="show('screen-settings-client')">â‘³ Client Settings</button>
</div>

<script>

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GLOBAL MODE STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let appMode = 'pq'; // 'pq' or 'general'

// â”€â”€ Content definitions for each mode â”€â”€
const MODES = {
  pq: {
    label: 'PQ Coaching',
    icon: 'âœ¦',
    clientTag: '<span class="tag-pq">âœ¦ PQ</span>',
    sessionMeta: 'PQ Coaching',
    insightBannerText: '<strong>Saboteur pattern:</strong> <em>Pleaser</em> flagged on 3 consecutive commitments around boundaries. Worth exploring Monday.',
    alertSub: '2 of 4 complete Â· 1 saboteur flagged',
    card1Resist: '<div class="sab-tag">Controller</div>',
    card2Resist1: '<div class="sab-tag">Pleaser</div>',
    card2Resist2: '<div class="sab-tag">Pleaser</div>',
    domSaboteurBanner: `
      <div id="dom-pattern-banner"><div class="insight-banner" style="margin:16px 16px 0"><div class="insight-icon">âœ¦</div><div class="insight-text" style="color:var(--sage)"><strong>Dominant Saboteur:</strong> Controller has appeared in 5 of last 8 resistance flags. Marcus tends to resist when he feels he's not in charge of outcomes.</div></div></div>`,
    detailResistTag: '<div class="sab-tag">Controller</div>',
    detailResistNote: 'Controller',
    sagePanelClient: `
      <div id="sage-panel"><div style="padding:16px 20px"><div style="background:var(--sage-pale);border-radius:14px;padding:14px;border:1px solid rgba(107,143,110,0.2)"><div style="font-size:12px;color:var(--sage);font-weight:500;margin-bottom:4px">âœ¦ Your Sage is watching</div><div style="font-size:12px;color:var(--text-mid);line-height:1.5">When you notice resistance, pause and ask: <em>"What would my Sage know that my saboteur is hiding?"</em></div></div></div></div>`,
    checkinResistLabel: 'Is a saboteur showing up?',
    checkinResistGrid: `
      <div id="resist-grid-container"><div class="pq-sab-grid" id="resist-options">
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Judge</div><div class="sab-desc">Self-criticism, nothing's good enough</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Controller</div><div class="sab-desc">Need to control the outcome first</div></div>
        <div class="sab-pill selected" onclick="selectResist(this)"><div class="sab-name">Avoider</div><div class="sab-desc">Avoiding difficult or unclear tasks</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Hyper-Achiever</div><div class="sab-desc">Has to be perfect or not worth doing</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Stickler</div><div class="sab-desc">Waiting for exactly the right moment</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Pleaser</div><div class="sab-desc">Other people's needs came first</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Victim</div><div class="sab-desc">Felt overwhelmed or hopeless</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Restless</div><div class="sab-desc">Got distracted by other things</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Hyper-Rational</div><div class="sab-desc">Over-thinking, analysis paralysis</div></div>
        <div class="sab-pill" onclick="selectResist(this)"><div class="sab-name">Hyper-Vigilant</div><div class="sab-desc">Fear of what might go wrong</div></div>
        <div class="sab-pill" onclick="selectResist(this)" style="grid-column:span 2"><div class="sab-name">Life Happened</div><div class="sab-desc">Genuine external circumstance got in the way</div></div>
      </div>`,
    sageCheckinPrompt: `
      <div id="sage-checkin-legacy"><div id="sage-prompt" style="background:var(--sage-pale);border-radius:12px;padding:12px;margin-bottom:16px;border:1px solid rgba(107,143,110,0.2)">
        <div style="font-size:11px;color:var(--sage);font-weight:600;margin-bottom:4px">âœ¦ What did your Sage know?</div>
        <textarea class="input" rows="2" placeholder="Optional: what would your Sage say about this?" style="background:white;font-size:13px"></textarea>
      </div>`,
    attentionInsight: `
      <div style="background:var(--sage-pale);border-radius:10px;padding:10px 12px;margin-bottom:12px;border-left:3px solid var(--sage)">
        <div style="font-size:10px;font-weight:600;color:var(--sage);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">âœ¦ Saboteur Pattern</div>
        <div style="font-size:12px;color:var(--text-mid);line-height:1.5">This is Sarah's <strong>3rd consecutive</strong> Pleaser flag around financial commitments. Her need for others' approval may be blocking financial self-advocacy.</div>
      </div>`,
    settingsDefaultMode: 'PQ Coaching',
  },
  general: {
    label: 'General Coaching',
    icon: 'ğŸŒ±',
    clientTag: '',
    sessionMeta: 'General Coaching',
    insightBannerText: '<strong>Resistance pattern:</strong> <em>Avoidance</em> flagged on 3 consecutive commitments around finances. Worth exploring Monday.',
    alertSub: '2 of 4 complete Â· 1 resistance flagged',
    card1Resist: '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Fear</div>',
    card2Resist1: '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Avoidance</div>',
    card2Resist2: '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Doubt</div>',
    domSaboteurBanner: `
      <div class="insight-banner" style="margin:16px 16px 0">
        <div class="insight-icon">âš‘</div>
        <div class="insight-text" style="color:var(--resistance)"><strong>Resistance pattern:</strong> Fear has appeared in 5 of Marcus's last 8 flagged commitments. Often surfaces around visibility and taking action on his business.</div>
      </div>`,
    detailResistTag: '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Fear</div>',
    detailResistNote: 'Fear',
    sagePanelClient: '',
    checkinResistLabel: 'What got in the way?',
    checkinResistGrid: `
      <div class="resist-grid" id="resist-options">
        <div class="resist-pill" onclick="selectResist(this)"><span class="resist-pill-icon">ğŸ˜¨</span>Fear</div>
        <div class="resist-pill" onclick="selectResist(this)"><span class="resist-pill-icon">ğŸŒŠ</span>Overwhelm</div>
        <div class="resist-pill selected" onclick="selectResist(this)"><span class="resist-pill-icon">ğŸšª</span>Avoidance</div>
        <div class="resist-pill" onclick="selectResist(this)"><span class="resist-pill-icon">ğŸ¤”</span>Doubt</div>
        <div class="resist-pill" onclick="selectResist(this)"><span class="resist-pill-icon">ğŸ˜¤</span>Resentment</div>
        <div class="resist-pill" onclick="selectResist(this)"><span class="resist-pill-icon">ğŸŒª</span>Life Happened</div>
      </div>`,
    sageCheckinPrompt: '',
    attentionInsight: `
      <div style="background:var(--morning);border-radius:10px;padding:10px 12px;margin-bottom:12px;border-left:3px solid var(--clay)">
        <div style="font-size:10px;font-weight:600;color:var(--clay);text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px">Resistance Pattern</div>
        <div style="font-size:12px;color:var(--text-mid);line-height:1.5">This is Sarah's <strong>3rd consecutive</strong> Avoidance flag around financial commitments. A deeper conversation about what she's avoiding may be needed.</div>
      </div>`,
    settingsDefaultMode: 'General Coaching',
  }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// APPLY MODE â€” updates all dynamic content
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyMode(mode) {
  const m = MODES[mode];

  // â”€â”€ Dashboard: client tags â”€â”€
  document.querySelectorAll('.client-mode-tag').forEach(el => {
    el.innerHTML = m.clientTag;
  });

  // â”€â”€ Dashboard: insight banner â”€â”€
  const ib = document.getElementById('insight-banner-text');
  if (ib) ib.innerHTML = m.insightBannerText;

  // â”€â”€ Dashboard: alert sub text â”€â”€
  const as = document.getElementById('alert-sub-text');
  if (as) as.textContent = m.alertSub;

  // â”€â”€ Dashboard card 1: resistance tag â”€â”€
  const c1r = document.getElementById('card1-resist');
  if (c1r) c1r.innerHTML = m.card1Resist;

  // â”€â”€ Dashboard card 2: resistance tags â”€â”€
  const c2r1 = document.getElementById('card2-resist1');
  if (c2r1) c2r1.innerHTML = m.card2Resist1;
  const c2r2 = document.getElementById('card2-resist2');
  if (c2r2) c2r2.innerHTML = m.card2Resist2;

  // â”€â”€ Client detail: dominant saboteur/resistance banner â”€â”€
  const dsb = document.getElementById('dom-pattern-banner');
  if (dsb) dsb.innerHTML = m.domSaboteurBanner;

  // â”€â”€ Client detail: resistance tag on flagged commitment â”€â”€
  const drt = document.getElementById('detail-resist-tag');
  if (drt) drt.innerHTML = m.detailResistTag;

  // â”€â”€ Client detail: resistance note label â”€â”€
  const drn = document.getElementById('detail-resist-note');
  if (drn) drn.textContent = m.detailResistNote;

  // â”€â”€ Client detail: session meta â”€â”€
  document.querySelectorAll('.client-session-mode').forEach(el => {
    el.textContent = m.sessionMeta;
  });

  // â”€â”€ Client view: sage panel â”€â”€
  const sp = document.getElementById('sage-panel');
  if (sp) sp.innerHTML = m.sagePanelClient;

  // â”€â”€ Check-in: saboteur detail field label â”€â”€
  const sdl = document.getElementById('saboteur-detail-label');
  if (sdl) sdl.textContent = mode === 'pq'
    ? 'Tell us more about what\'s happening with the saboteur'
    : 'Tell us more about what\'s getting in the way';

  // â”€â”€ Check-in: resistance section label + grid â”€â”€
  const rl = document.getElementById('resist-label');
  if (rl) rl.textContent = m.checkinResistLabel;
  const rg = document.getElementById('resist-grid-container');
  if (rg) rg.innerHTML = m.checkinResistGrid;

  // â”€â”€ Attention screen: insight block â”€â”€
  const ai1 = document.getElementById('attention-insight-1');
  if (ai1) ai1.innerHTML = m.attentionInsight;

  // â”€â”€ Attention screen: resistance tags â”€â”€
  const at1 = document.getElementById('attention-tag-1');
  if (at1) at1.innerHTML = mode === 'pq'
    ? '<div class="sab-tag">Pleaser</div>'
    : '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Avoidance</div>';
  const at2 = document.getElementById('attention-tag-2');
  if (at2) at2.innerHTML = mode === 'pq'
    ? '<div class="sab-tag">Pleaser</div>'
    : '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Doubt</div>';

  // â”€â”€ Settings: default mode display â”€â”€
  const smd = document.getElementById('settings-default-mode');
  if (smd) smd.textContent = m.settingsDefaultMode;

  // â”€â”€ Insights: toggle PQ vs General sections â”€â”€
  const igp = document.getElementById('insights-pq-section');
  const igg = document.getElementById('insights-general-section');
  if (igp) igp.style.display = mode === 'pq' ? 'block' : 'none';
  if (igg) igg.style.display = mode === 'general' ? 'block' : 'none';

  // â”€â”€ History: resistance title + bars + insight â”€â”€
  const hrt = document.getElementById('history-resist-title');
  if (hrt) hrt.textContent = mode === 'pq' ? 'My Saboteur Patterns' : 'My Resistance Patterns';
  const hrb = document.getElementById('history-resist-bars');
  if (hrb) hrb.innerHTML = mode === 'pq'
    ? `<div class="resist-bar-row"><div class="resist-bar-label">Controller</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
       <div class="resist-bar-row"><div class="resist-bar-label">Judge</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:33%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">3</div></div>
       <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Avoider</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:11%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">1</div></div>`
    : `<div class="resist-bar-row"><div class="resist-bar-label">Fear</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
       <div class="resist-bar-row"><div class="resist-bar-label">Avoidance</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:33%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">3</div></div>
       <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Overwhelm</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:11%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">1</div></div>`;
  const hri = document.getElementById('history-resist-insight');
  if (hri) hri.innerHTML = mode === 'pq'
    ? '<strong style="color:var(--sage)">âœ¦ Pattern:</strong> Your Controller shows up most when commitments involve uncertainty or other people\'s input. A consistent theme worth exploring with your coach.'
    : '<strong style="color:var(--clay)">Pattern:</strong> Fear appears most when commitments involve visibility or putting yourself out there. Worth discussing with your coach.';
  if (hri) hri.style.borderLeftColor = mode === 'pq' ? 'var(--sage)' : 'var(--clay)';
  if (hri) hri.style.background = mode === 'pq' ? 'var(--sage-pale)' : 'var(--morning)';

  // â”€â”€ History: cycle resist tags â”€â”€
  const histTags = {
    'history-tag-1': mode === 'pq' ? '<div class="sab-tag">Controller</div>' : '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Fear</div>',
    'history-tag-2': mode === 'pq' ? '<div class="sab-tag">Controller</div>' : '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Avoidance</div>',
    'history-tag-3': mode === 'pq' ? '<div class="sab-tag">Controller</div>' : '<div class="sab-tag" style="background:rgba(184,92,92,0.1);color:var(--resistance)">Fear</div>',
  };
  Object.entries(histTags).forEach(([id, html]) => {
    const el = document.getElementById(id);
    if (el) el.innerHTML = html;
  });

  // â”€â”€ Coach History: resistance title + bars â”€â”€
  const chrt = document.getElementById('coach-history-resist-title');
  if (chrt) chrt.textContent = mode === 'pq' ? 'Saboteur Analysis' : 'Resistance Analysis';
  const chrb = document.getElementById('coach-history-resist-bars');
  if (chrb) chrb.innerHTML = mode === 'pq'
    ? `<div class="resist-bar-row"><div class="resist-bar-label">Controller</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
       <div class="resist-bar-row"><div class="resist-bar-label">Judge</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:33%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">3</div></div>
       <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Avoider</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:11%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">1</div></div>`
    : `<div class="resist-bar-row"><div class="resist-bar-label">Fear</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:78%;background:var(--resistance)"></div></div><div class="resist-bar-count">7</div></div>
       <div class="resist-bar-row"><div class="resist-bar-label">Avoidance</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:33%;background:rgba(184,92,92,0.5)"></div></div><div class="resist-bar-count">3</div></div>
       <div class="resist-bar-row" style="border:none"><div class="resist-bar-label">Overwhelm</div><div class="resist-bar-track"><div class="resist-bar-fill" style="width:11%;background:rgba(184,92,92,0.25)"></div></div><div class="resist-bar-count">1</div></div>`;
  const chri = document.getElementById('coach-history-insight');
  if (chri) chri.innerHTML = mode === 'pq'
    ? '<strong style="color:var(--sage)">&#10022; Coach note:</strong> Controller dominates across all periods. Marcus consistently resists when outcomes depend on others or are uncertain.'
    : '<strong style="color:var(--clay)">Coach note:</strong> Fear dominates across all periods. Marcus consistently struggles with commitments that involve visibility or exposure to judgment.';
  if (chri) chri.style.borderLeftColor = mode === 'pq' ? 'var(--sage)' : 'var(--clay)';
  if (chri) chri.style.background = mode === 'pq' ? 'var(--sage-pale)' : 'var(--morning)';

  // â”€â”€ Attention screen: flag labels â”€â”€
  const flagLabel = mode === 'pq' ? 'Saboteur Flagged' : 'Resistance Flagged';
  ['attention-flag-label-1','attention-flag-label-2'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.textContent = flagLabel;
  });

  // â”€â”€ Check-in confirm: sage note vs general note â”€â”€
  const ccSage = document.getElementById('checkin-confirm-sage');
  if (ccSage) {
    ccSage.innerHTML = mode === 'pq'
      ? '<div style="font-size:11px;font-weight:600;color:var(--sage);margin-bottom:4px">âœ¦ That\'s progress</div><div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.6">Starting imperfectly is still starting. Your coach will see this before your next session.</div>'
      : '<div style="font-size:11px;font-weight:600;color:var(--clay);margin-bottom:4px">That\'s progress</div><div style="font-size:12px;color:rgba(234,217,192,0.6);line-height:1.6">Naming what got in the way is the first step. Your coach will see this before your next session.</div>';
    ccSage.style.background   = mode === 'pq' ? 'rgba(107,143,110,0.12)' : 'rgba(122,79,46,0.1)';
    ccSage.style.borderColor  = mode === 'pq' ? 'rgba(107,143,110,0.2)'  : 'rgba(122,79,46,0.2)';
  }
  const ccTag = document.getElementById('checkin-confirm-sab-tag');
  if (ccTag) ccTag.textContent = mode === 'pq' ? 'Controller' : 'Avoidance';

  // â”€â”€ Mode indicator pill in header â”€â”€
  document.querySelectorAll('.mode-indicator').forEach(el => {
    el.innerHTML = mode === 'pq'
      ? '<span style="background:rgba(107,143,110,0.2);color:var(--sage);font-size:10px;padding:3px 8px;border-radius:10px;font-weight:500">âœ¦ PQ Mode</span>'
      : '<span style="background:rgba(122,79,46,0.15);color:var(--clay);font-size:10px;padding:3px 8px;border-radius:10px;font-weight:500">ğŸŒ± General Mode</span>';
  });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SELECT MODE (signup screen)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function selectMode(mode) {
  appMode = mode;
  document.getElementById('mode-general').classList.toggle('selected', mode==='general');
  document.getElementById('mode-pq').classList.toggle('selected', mode==='pq');
  // Update add-client screen default note
  const note = document.getElementById('add-client-mode-note');
  if (note) note.innerHTML = `Your default is <strong style="color:var(--accent)">${MODES[mode].label}</strong> â€” change for this client if needed. You can also update this anytime from the client's profile.`;
  applyMode(mode);
}

function selectAddMode(mode) {
  document.getElementById('add-mode-general').classList.toggle('selected', mode==='general');
  document.getElementById('add-mode-pq').classList.toggle('selected', mode==='pq');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function show(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.dev-btn').forEach(b => {
    b.classList.toggle('active', b.getAttribute('onclick').includes(id));
  });
  const s = document.getElementById(id).querySelector('.scroll');
  if (s) s.scrollTop = 0;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHECK-IN INTERACTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function selectStatus(el, type) {
  document.querySelectorAll('#screen-checkin .status-pill').forEach(p => {
    p.className = 'status-pill';
  });
  if (type==='done')    el.classList.add('sel-done');
  if (type==='notdone') el.classList.add('sel-notdone');
  if (type==='prog')    el.classList.add('sel-prog');
  document.getElementById('resistance-section').style.display =
    (type==='notdone' || type==='prog') ? 'block' : 'none';
}

function selectResist(el) {
  const container = el.closest('#resist-options');
  container.querySelectorAll('.sab-pill, .resist-pill').forEach(p => p.classList.remove('selected'));
  el.classList.add('selected');
}

// legacy alias
function selectSab(el) { selectResist(el); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SESSION AGENDA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addToAgenda(btn, title) {
  btn.textContent = 'âœ“ Added to Agenda';
  btn.style.background = 'var(--complete-pale)';
  btn.style.color = 'var(--complete)';
  btn.style.borderColor = 'rgba(90,138,94,0.3)';
  btn.disabled = true;
  const summary = document.getElementById('agenda-summary');
  summary.style.display = 'block';
  const list = document.getElementById('agenda-list');
  const item = document.createElement('div');
  item.style.cssText = 'display:flex;align-items:center;gap:8px;background:rgba(255,255,255,0.08);border-radius:8px;padding:8px 10px';
  item.innerHTML = `<span style="color:var(--accent);font-size:12px">â†’</span><span style="color:var(--sand);font-size:12px;flex:1">${title}</span>`;
  list.appendChild(item);
  setTimeout(() => summary.scrollIntoView({behavior:'smooth', block:'nearest'}), 100);
}


function sendInvitation() {
  const name  = document.getElementById('new-client-name').value.trim()  || 'New Client';
  const email = document.getElementById('new-client-email').value.trim() || 'client@email.com';

  // Derive initials from name
  const parts    = name.split(' ').filter(Boolean);
  const initials = parts.length >= 2
    ? (parts[0][0] + parts[parts.length-1][0]).toUpperCase()
    : name.slice(0, 2).toUpperCase();

  // Populate confirmation card
  document.getElementById('confirm-name').textContent   = name;
  document.getElementById('confirm-email').textContent  = email;
  document.getElementById('confirm-avatar').textContent = initials;

  // Reflect selected mode on confirm tag
  const isPQ = document.getElementById('add-mode-pq').classList.contains('selected');
  const tag  = document.getElementById('confirm-mode-tag');
  if (tag) {
    tag.textContent = isPQ ? 'âœ¦ PQ' : 'ğŸŒ± General';
    tag.style.background = isPQ ? '' : 'rgba(122,79,46,0.15)';
    tag.style.color      = isPQ ? '' : 'var(--clay)';
  }

  show('screen-invite-confirm');
}

function setTimeFilter(btn) {
  document.querySelectorAll('#screen-insights .time-filter').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
}


// â”€â”€ History period data (simulated) â”€â”€
const HISTORY_PERIODS = {
  'Last 30 Days':  { completion:'67%', kept:18, resisted:9, sessions:7,  label:'Last 30 days',  cycles:2 },
  'Last 90 Days':  { completion:'63%', kept:42, resisted:19, sessions:14, label:'Last 90 days', cycles:5 },
  'Last 6 Months': { completion:'61%', kept:78, resisted:31, sessions:24, label:'Last 6 months', cycles:9 },
  'Last Year':     { completion:'65%', kept:134, resisted:48, sessions:38, label:'Last year',    cycles:14 },
  'All Time':      { completion:'65%', kept:134, resisted:48, sessions:38, label:'All time',     cycles:14 },
};

function setHistoryPeriod(btn, view) {
  // Update active button within the same header
  const header = btn.closest('.app-header, .client-screen-header');
  if (header) header.querySelectorAll('.time-filter').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');

  const period = btn.textContent.trim();
  const data = HISTORY_PERIODS[period] || HISTORY_PERIODS['Last 30 Days'];

  if (view === 'client') {
    // Update client stats
    const statsEl = document.getElementById('client-history-stats');
    if (statsEl) statsEl.innerHTML = `
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:16px">
        <div class="insight-stat-card" style="text-align:center"><div class="isc-num" style="color:var(--complete)">${data.completion}</div><div class="isc-lbl">Completion</div></div>
        <div class="insight-stat-card" style="text-align:center"><div class="isc-num">${data.kept}</div><div class="isc-lbl">Kept</div></div>
        <div class="insight-stat-card" style="text-align:center"><div class="isc-num" style="color:var(--resistance)">${data.resisted}</div><div class="isc-lbl">Resisted</div></div>
      </div>`;
    // Update cycles title
    const ctEl = document.getElementById('client-cycles-title');
    if (ctEl) ctEl.innerHTML = `Past Cycles <span style="font-size:11px;color:var(--text-light);font-family:'DM Sans',sans-serif">â€” ${data.label}</span>`;
    // Show/hide extra cycles based on period
    updateClientCycles(data.cycles);
  }

  if (view === 'coach') {
    // Update coach stats
    const cStatsEl = document.getElementById('coach-history-stats');
    if (cStatsEl) cStatsEl.innerHTML = `
      <div class="insight-stat-card"><div class="isc-num" style="color:var(--complete)">${data.completion}</div><div class="isc-lbl">Completion rate</div></div>
      <div class="insight-stat-card"><div class="isc-num">${data.kept}</div><div class="isc-lbl">Commitments kept</div></div>
      <div class="insight-stat-card"><div class="isc-num" style="color:var(--resistance)">${data.resisted}</div><div class="isc-lbl">Resistance flags</div></div>
      <div class="insight-stat-card"><div class="isc-num">${data.sessions}</div><div class="isc-lbl">Sessions completed</div></div>`;
    // Update session history title
    const coachTitle = document.getElementById('coach-cycles-title');
    if (coachTitle) coachTitle.innerHTML = `Session History <span style="font-size:11px;color:var(--text-light);font-family:'DM Sans',sans-serif">â€” ${data.label}</span>`;
    // Show/hide extra cycles
    updateCoachCycles(data.cycles);
  }
}

function updateClientCycles(count) {
  const list = document.getElementById('client-cycles-list');
  if (!list) return;
  // Show extra historical cycles when longer period selected
  const extra = count > 2 ? `
    <div class="history-cycle-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div style="font-size:13px;font-weight:500;color:var(--soil)">Jan 10 â€“ Jan 23</div>
        <div style="font-size:11px;font-weight:500;color:var(--complete);background:var(--complete-pale);padding:3px 8px;border-radius:10px">4 of 4 complete</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:5px">
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Set up home office</div></div>
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Complete LinkedIn profile</div></div>
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Identify top 3 goals</div></div>
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Journal daily for 1 week</div></div>
      </div>
      <div style="margin-top:8px;font-size:11px;color:var(--complete);font-style:italic">ğŸ‰ Perfect cycle!</div>
    </div>
    ${count > 5 ? '<div class="history-cycle-card" style="text-align:center;padding:20px"><div style="font-size:12px;color:var(--text-light)">+ ' + (count - 3) + ' more cycles in this period</div><button class="btn btn-ghost" style="margin-top:8px;font-size:12px;color:var(--clay)">Load more â†’</button></div>' : ''}
  ` : '';
  // Rebuild base 2 cycles + extras
  list.innerHTML = list.innerHTML.split('<div class="history-cycle-card"')[0] +
    `<div class="history-cycle-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div style="font-size:13px;font-weight:500;color:var(--soil)">Feb 7 â€“ Feb 20</div>
        <div style="font-size:11px;font-weight:500;color:var(--complete);background:var(--complete-pale);padding:3px 8px;border-radius:10px">3 of 4 complete</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:5px">
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Morning journaling 3x</div></div>
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Call mentor</div></div>
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">30 min daily walk</div></div>
        <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Draft business plan outline</div><div class="sab-tag">Controller</div></div>
      </div>
    </div>
    <div class="history-cycle-card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <div style="font-size:13px;font-weight:500;color:var(--soil)">Jan 24 â€“ Feb 6</div>
        <div style="font-size:11px;font-weight:500;color:var(--pending);background:var(--pending-pale);padding:3px 8px;border-radius:10px">2 of 4 complete</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:5px">
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Research 3 business models</div></div>
        <div class="commit-row"><div class="commit-dot dot-done">âœ“</div><div class="commit-text done">Read chapter 2 of Deep Work</div></div>
        <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Schedule accountability call</div><div class="sab-tag">Controller</div></div>
        <div class="commit-row"><div class="commit-dot dot-resist"></div><div class="commit-text" style="opacity:0.6">Share idea with 2 friends</div><div class="sab-tag">Controller</div></div>
      </div>
    </div>` + extra;
}

function updateCoachCycles(count) {
  const title = document.getElementById('coach-cycles-title');
  if (count > 3) {
    const list = document.getElementById('coach-cycles-list');
    if (list) {
      // Append a "load more" hint
      const existing = list.querySelector('.load-more-hint');
      if (!existing) {
        const hint = document.createElement('div');
        hint.className = 'history-cycle-card load-more-hint';
        hint.style.cssText = 'text-align:center;padding:16px';
        hint.innerHTML = `<div style="font-size:12px;color:var(--text-light)">+ ${count - 3} more sessions in this period</div><button class="btn btn-ghost" style="margin-top:8px;font-size:12px;color:var(--clay)">Load more â†’</button>`;
        list.appendChild(hint);
      }
    }
  } else {
    const hint = document.querySelector('.load-more-hint');
    if (hint) hint.remove();
  }
}


// â”€â”€ Client Switcher for Coach History â”€â”€
const CLIENT_HISTORY_DATA = {
  'Marcus Kim': {
    initials:'MK', color:'#6B8F6E', since:'Jan 2025',
    completion:'67%', kept:18, resisted:9, sessions:7,
    resistTitle:'Saboteur Analysis',
    insight:'Controller dominates across all periods. Marcus consistently resists when outcomes depend on others or are uncertain. The pattern strengthened after the business plan commitment was introduced in Week 3.',
    insightPrefix:'âœ¦ Coach note',
    bars: [
      {label:'Controller', pct:78, count:7},
      {label:'Judge',      pct:33, count:3},
      {label:'Avoider',    pct:11, count:1},
    ],
    notePreview:'Controller showing up strongly around the business plan. Marcus admitted he is worried the plan will expose gaps in his thinking.'
  },
  'Sarah Kennedy': {
    initials:'SK', color:'#B8943A', since:'Mar 2024',
    completion:'58%', kept:31, resisted:14, sessions:12,
    resistTitle:'Saboteur Analysis',
    insight:'Pleaser is the dominant saboteur â€” appearing in every cycle involving financial self-advocacy or boundary-setting. Sarah consistently defers to the priorities of others over her own commitments.',
    insightPrefix:'âœ¦ Coach note',
    bars: [
      {label:'Pleaser',    pct:85, count:9},
      {label:'Judge',      pct:38, count:4},
      {label:'Avoider',    pct:10, count:1},
    ],
    notePreview:'Sarah flagged Pleaser for the third consecutive cycle. Core theme: avoids financial self-advocacy whenever someone else has needs to attend to.'
  },
  'David Park': {
    initials:'DP', color:'#4A7B9D', since:'Jun 2024',
    completion:'75%', kept:27, resisted:4, sessions:9,
    resistTitle:'Saboteur Analysis',
    insight:'David is high-functioning with minimal saboteur activation. Occasional Hyper-Achiever flags when commitments feel insufficiently ambitious. Continue stretching his goals upward.',
    insightPrefix:'âœ¦ Coach note',
    bars: [
      {label:'H-Achiever', pct:60, count:3},
      {label:'Stickler',   pct:20, count:1},
    ],
    notePreview:'David is thriving â€” highest completion rate in the cohort. No significant resistance patterns detected this period.'
  },
  'Priya Nair': {
    initials:'PN', color:'#8B6FAE', since:'Sep 2024',
    completion:'71%', kept:10, resisted:3, sessions:4,
    resistTitle:'Saboteur Analysis',
    insight:'Only 2 full cycles completed â€” too early for strong pattern detection. Hyper-Achiever emerging as a theme: Priya tends to set overly ambitious commitments then struggles with execution.',
    insightPrefix:'âœ¦ Coach note',
    bars: [
      {label:'H-Achiever', pct:67, count:2},
      {label:'Judge',      pct:33, count:1},
    ],
    notePreview:'Early stages. Hyper-Achiever emerging â€” Priya sets very ambitious commitments. Consider helping her right-size goals next session.'
  },
};

function toggleClientSwitcher() {
  const sw = document.getElementById('client-switcher');
  const btn = document.getElementById('ch-switch-btn');
  const open = sw.style.display === 'none';
  sw.style.display = open ? 'block' : 'none';
  btn.textContent = open ? 'Close âœ•' : 'Switch âŒ„';
}

function switchHistoryClient(name, initials, color, since, notePreview) {
  const data = CLIENT_HISTORY_DATA[name];
  if (!data) return;

  // Update header
  document.getElementById('ch-name').textContent = name;
  document.getElementById('ch-since').textContent = 'Client since ' + since;
  const av = document.getElementById('ch-avatar');
  av.textContent = initials;
  av.style.background = color;

  // Mark active row
  document.querySelectorAll('.ch-client-row').forEach(r => {
    r.classList.toggle('active', r.getAttribute('onclick').includes(name));
  });
  // Update active row viewing label
  document.querySelectorAll('.ch-client-row').forEach(r => {
    const viewing = r.querySelector('.viewing-label');
    if (viewing) viewing.remove();
  });
  const activeRow = document.querySelector('.ch-client-row.active');
  if (activeRow) {
    const lbl = document.createElement('div');
    lbl.className = 'viewing-label';
    lbl.style.cssText = 'font-size:10px;color:var(--sage)';
    lbl.textContent = 'âœ“ Viewing';
    activeRow.appendChild(lbl);
  }

  // Update stats
  const statsEl = document.getElementById('coach-history-stats');
  if (statsEl) statsEl.innerHTML = `
    <div class="insight-stat-card"><div class="isc-num" style="color:var(--complete)">${data.completion}</div><div class="isc-lbl">Completion rate</div></div>
    <div class="insight-stat-card"><div class="isc-num">${data.kept}</div><div class="isc-lbl">Commitments kept</div></div>
    <div class="insight-stat-card"><div class="isc-num" style="color:var(--resistance)">${data.resisted}</div><div class="isc-lbl">Resistance flags</div></div>
    <div class="insight-stat-card"><div class="isc-num">${data.sessions}</div><div class="isc-lbl">Sessions completed</div></div>`;

  // Update pattern title + bars
  const resistTitle = document.getElementById('coach-history-resist-title');
  if (resistTitle) resistTitle.textContent = appMode === 'pq' ? data.resistTitle : 'Resistance Analysis';

  const resistBars = document.getElementById('coach-history-resist-bars');
  if (resistBars) {
    resistBars.innerHTML = data.bars.map((b, i) =>
      `<div class="resist-bar-row" ${i === data.bars.length-1 ? 'style="border:none"':''}>
        <div class="resist-bar-label">${b.label}</div>
        <div class="resist-bar-track"><div class="resist-bar-fill" style="width:${b.pct}%;background:${b.pct > 60 ? 'var(--resistance)' : b.pct > 30 ? 'rgba(184,92,92,0.5)' : 'rgba(184,92,92,0.25)'}"></div></div>
        <div class="resist-bar-count">${b.count}</div>
      </div>`
    ).join('');
  }

  // Update insight note
  const insightEl = document.getElementById('coach-history-insight');
  if (insightEl) insightEl.innerHTML = `<strong style="color:var(--sage)">${data.insightPrefix}:</strong> ${data.insight}`;

  // Update session note preview in first cycle card
  const noteEl = document.querySelector('#coach-cycles-list .history-cycle-card .note-preview');
  if (noteEl) noteEl.textContent = data.notePreview;

  // Update cycles title
  const cyclesTitle = document.getElementById('coach-cycles-title');
  if (cyclesTitle) {
    const period = document.querySelector('#screen-coach-history .time-filter.active');
    const label = period ? period.textContent : 'Last 30 days';
    cyclesTitle.innerHTML = `Session History <span style="font-size:11px;color:var(--text-light);font-family:'DM Sans',sans-serif">â€” ${label}</span>`;
  }

  // Close switcher
  toggleClientSwitcher();
}


// â”€â”€ Coach Onboarding Walkthrough â”€â”€
const ONBOARD_SLIDES = [
  {
    icon: 'ğŸŒ±',
    title: 'Welcome to Groundwork',
    body: 'Groundwork helps your clients follow through on the commitments they make in sessions â€” and helps you spot the patterns that get in their way.',
  },
  {
    icon: 'âœ¦',
    title: 'Meet the Sage',
    body: 'In PQ Coaching, the Sage is your client\'s positive intelligence â€” the part that responds with clarity, compassion, and creativity. Groundwork weaves the five Sage powers â€” Empathize, Explore, Innovate, Navigate, and Activate â€” into every stage of the coaching cycle.',
  },
  {
    icon: 'âš‘',
    title: 'Catch resistance early',
    body: 'When clients hit a wall, they flag it in the app. You see it before your next session â€” so you walk in knowing exactly where to focus.',
  },
  {
    icon: 'â—ˆ',
    title: 'Patterns become visible',
    body: 'Over time, Groundwork surfaces which saboteurs or resistance types keep showing up for each client â€” turning individual struggles into coaching intelligence.',
  },
];
let onboardStep = 0;

function onboardNext() {
  onboardStep++;
  if (onboardStep >= ONBOARD_SLIDES.length) {
    show('screen-empty-state');
    onboardStep = 0;
    renderOnboard(0);
    return;
  }
  renderOnboard(onboardStep);
}

function renderOnboard(step) {
  const slide = ONBOARD_SLIDES[step];
  // Animate out/in
  const container = document.getElementById('onboard-slide');
  container.style.opacity = '0';
  container.style.transform = 'translateX(20px)';
  setTimeout(() => {
    document.getElementById('onboard-icon').textContent  = slide.icon;
    document.getElementById('onboard-title').textContent = slide.title;
    document.getElementById('onboard-body').textContent  = slide.body;
    // Update dots
    document.querySelectorAll('.onboard-dot').forEach((d, i) => {
      d.classList.toggle('active', i === step);
      d.style.display = i < ONBOARD_SLIDES.length ? '' : 'none';
    });
    // Update button
    const btn = document.getElementById('onboard-next-btn');
    btn.textContent = step === ONBOARD_SLIDES.length - 1 ? 'Get Started â†’' : 'Next â†’';
    // Animate in
    container.style.transition = 'opacity 0.3s, transform 0.3s';
    container.style.opacity = '1';
    container.style.transform = 'translateX(0)';
  }, 150);
}



// â”€â”€ Sage Power selection on check-in â”€â”€
function selectSagePower(el) {
  document.querySelectorAll('.sage-power-pill').forEach(p => p.classList.remove('selected'));
  el.classList.add('selected');
  // Update the text prompt to match selected power
  const prompts = {
    'Empathize': 'What would self-compassion sound like here?',
    'Explore':   'What are you curious about in this situation?',
    'Innovate':  'What new approach could your Sage imagine?',
    'Navigate':  'What do your values say matters most here?',
    'Activate':  'What one small step is your Sage ready to take?',
  };
  const lbl = document.getElementById('sage-response-prompt-label');
  const txt = document.getElementById('sage-response-text');
  const power = el.dataset.power;
  if (lbl) lbl.innerHTML = prompts[power] + ' <span style="font-weight:400;font-style:italic">(shared with your coach)</span>';
  if (txt) txt.placeholder = 'Let your Sage speak...';
}


// â”€â”€ Sage Power Tagging (Post Session) â”€â”€
const SAGE_TAG_HINTS = {
  'Empathize': 'Empathize â€” invite self-compassion; meet this with kindness, not judgment',
  'Explore':   'Explore â€” stay curious; notice what this commitment reveals',
  'Innovate':  'Innovate â€” encourage a fresh approach, outside normal patterns',
  'Navigate':  'Navigate â€” connect this to deeper values and what matters most',
  'Activate':  'Activate â€” take clear, decisive action; small steps count',
};

function selectSageTag(btn, power, n) {
  btn.classList.toggle('selected');
  const row = document.getElementById('sage-tag-row-' + n);
  if (!row) return;
  const selected = [...row.querySelectorAll('.sage-tag-pill.selected')]
    .map(p => p.dataset.power || p.textContent.replace(/^\S+\s/,'').trim());
  const hint = document.getElementById('sage-tag-hint-' + n);
  if (!hint) return;
  if (selected.length === 0) {
    hint.textContent = 'Tap one or more powers that fit this commitment';
    hint.style.fontStyle = 'italic';
  } else {
    hint.textContent = selected.map(p => SAGE_TAG_HINTS[p]?.split(' â€” ')[1] || p).join(' Â· ');
    hint.style.fontStyle = 'italic';
  }
}

// â”€â”€ Show/hide all sage-power-tag-rows based on settings â”€â”€
function applySageTaggingVisibility() {
  const show = sageFeatures.master && sageFeatures.tagging;
  document.querySelectorAll('.sage-power-tag-row').forEach(el => {
    el.style.display = show ? '' : 'none';
  });
}


// â”€â”€ PQ Rep nudge expand/collapse â”€â”€
function expandPQRep(el) {
  const collapsed = el.querySelector('.pqrep-collapsed');
  const expanded  = el.querySelector('.pqrep-expanded');
  if (!expanded || expanded.style.display === 'block') return;
  collapsed.style.display = 'none';
  expanded.style.display  = 'block';
}
function collapsePQRep(e, closeBtn) {
  e.stopPropagation();
  const expanded  = closeBtn.closest('.pqrep-expanded');
  const nudge     = closeBtn.closest('.pqrep-nudge');
  const collapsed = nudge.querySelector('.pqrep-collapsed');
  expanded.style.display  = 'none';
  collapsed.style.display = 'flex';
  // Update label to show completed
  const lbl = collapsed.querySelector('.pqrep-label');
  if (lbl) { lbl.textContent = 'PQ Rep complete âœ“'; lbl.style.color = 'var(--complete)'; }
  const tap = collapsed.querySelector('.pqrep-tap');
  if (tap) tap.style.display = 'none';
}

// â”€â”€ Show/hide PQ rep nudges based on settings â”€â”€
function applySagePQRepVisibility() {
  const show = sageFeatures.master && sageFeatures.pqrep;
  document.querySelectorAll('.pqrep-nudge').forEach(el => {
    el.style.display = show ? '' : 'none';
  });
}


// â”€â”€ Show/hide Sage attention lens blocks based on settings â”€â”€
function applySageAttentionVisibility() {
  const show = sageFeatures.master && sageFeatures.attention;
  document.querySelectorAll('.sage-attention-lens').forEach(el => {
    el.style.display = show ? '' : 'none';
  });
}


// â”€â”€ Show/hide Sage power tracking blocks based on settings â”€â”€
function applySageTrackingVisibility() {
  const show = sageFeatures.master && sageFeatures.tracking;
  ['client-sage-tracking','coach-sage-tracking'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.style.display = show ? '' : 'none';
  });
}

// â”€â”€ Apply sage checkin feature visibility â”€â”€
function applySageCheckinVisibility() {
  const container = document.getElementById('sage-checkin-container');
  if (!container) return;
  const show = sageFeatures.master && sageFeatures.checkin;
  container.style.display = show ? '' : 'none';
}

// â”€â”€ Sage Feature State â”€â”€
const sageFeatures = {
  master:     true,
  checkin:    true,
  tagging:    true,
  pqrep:      true,
  attention:  true,
  tracking:   true,
  onboarding: true,
};

function toggleSageMaster() {
  applySageTaggingVisibility();
  applySagePQRepVisibility();
  applySageAttentionVisibility();
  applySageTrackingVisibility();
  const btn = document.getElementById('sage-master-toggle');
  sageFeatures.master = btn.classList.contains('on') ? false : true;
  // classList.toggle already happened via the 'on' toggle click â€” re-check
  sageFeatures.master = btn.classList.contains('on');
  updateSageUI();
  applySageCheckinVisibility();
}

function syncSageCheckboxes() {
  applySageCheckinVisibility();
  applySageTaggingVisibility();
  applySagePQRepVisibility();
  applySageAttentionVisibility();
  applySageTrackingVisibility();
  ['checkin','tagging','pqrep','attention','tracking','onboarding'].forEach(key => {
    const cb = document.getElementById('sage-' + key);
    if (cb) sageFeatures[key] = cb.checked;
  });
  // If any checkbox is checked, ensure master shows as on
  const anyOn = Object.entries(sageFeatures).filter(([k]) => k !== 'master').some(([,v]) => v);
  if (!anyOn) {
    sageFeatures.master = false;
    const mb = document.getElementById('sage-master-toggle');
    if (mb) mb.classList.remove('on');
  }
}

function updateSageUI() {
  const list = document.getElementById('sage-feature-list');
  if (!list) return;
  const rows = list.querySelectorAll('.sage-feature-row');
  rows.forEach(row => {
    row.classList.toggle('disabled', !sageFeatures.master);
  });
  // If master turned on, restore all checkboxes to checked
  applySageCheckinVisibility();
  applySageTaggingVisibility();
  applySagePQRepVisibility();
  applySageAttentionVisibility();
  applySageTrackingVisibility();
  if (sageFeatures.master) {
    list.querySelectorAll('.sage-checkbox').forEach(cb => {
      cb.checked = true;
      const key = cb.id.replace('sage-','');
      sageFeatures[key] = true;
    });
  }
}

// â”€â”€ Init: apply default PQ mode on load â”€â”€
applyMode('pq');

</script>
</body>
</html>
